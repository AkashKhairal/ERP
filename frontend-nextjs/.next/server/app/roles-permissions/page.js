(()=>{var e={};e.id=8808,e.ids=[8808],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},49450:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var r=t(67096),a=t(16132),i=t(37284),n=t.n(i),l=t(32564),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(s,o);let c=["",{children:["roles-permissions",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,24109)),"D:\\SAAS\\ERP\\ERP\\frontend-nextjs\\src\\app\\roles-permissions\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,51069)),"D:\\SAAS\\ERP\\ERP\\frontend-nextjs\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\SAAS\\ERP\\ERP\\frontend-nextjs\\src\\app\\roles-permissions\\page.tsx"],u="/roles-permissions/page",m={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/roles-permissions/page",pathname:"/roles-permissions",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},63885:(e,s,t)=>{Promise.resolve().then(t.bind(t,88282))},88282:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>RolesPermissions_RolesPermissions});var r=t(30784),a=t(9885),i=t(48645),n=t(90065),l=t(99452),o=t(15835),c=t(8965),d=t(85928),u=t(29769),m=t(15276),p=t(87065),x=t(43128),h=t(96215),g=t(97040),j=t(45304),f=t(17133),v=t(57505),y=t(96589),w=t(3508),N=t(37565),A=t(57550),R=t(68856),_=t(27195),C=t(80467);let b=a.forwardRef(({className:e,...s},t)=>r.jsx(R.fC,{ref:t,className:(0,C.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...s,children:r.jsx(R.z$,{className:(0,C.cn)("flex items-center justify-center text-current"),children:r.jsx(_.Z,{className:"h-4 w-4"})})}));b.displayName=R.fC.displayName;var S=t(63342),P=t(21145);let E=P.Z.create({baseURL:"http://localhost:5000/api/roles",headers:{"Content-Type":"application/json"}});E.interceptors.request.use(e=>e,e=>Promise.reject(e));let D={getRoles:async(e={})=>{try{let s=await E.get("/",{params:e});return s.data}catch(e){return console.error("Error fetching roles:",e),{success:!1,data:[]}}},getRoleById:async e=>{try{let s=await E.get(`/${e}`);return s.data}catch(e){return console.error("Error fetching role:",e),{success:!1,data:{}}}},createRole:async e=>{try{let s=await E.post("/",e);return s.data}catch(e){return console.error("Error creating role:",e),{success:!1,data:{}}}},updateRole:async(e,s)=>{try{let t=await E.put(`/${e}`,s);return t.data}catch(e){return console.error("Error updating role:",e),{success:!1,data:{}}}},deleteRole:async e=>{try{let s=await E.delete(`/${e}`);return s.data}catch(e){return console.error("Error deleting role:",e),{success:!1,message:"Failed to delete role"}}},getDefaultRoles:async()=>{try{let e=await E.get("/default");return e.data}catch(e){return console.error("Error fetching default roles:",e),{success:!1,data:[]}}},initializeDefaultRoles:async()=>{try{let e=await E.post("/initialize");return e.data}catch(e){return console.error("Error initializing default roles:",e),{success:!1,message:"Failed to initialize default roles"}}},getAvailableModules:()=>["users","teams","employees","attendance","leaves","payroll","projects","tasks","sprints","finance","analytics","content","integrations"],getAvailableActions:()=>["create","read","update","delete","approve","export"],getModuleDescriptions:()=>({users:"User Management - Create, view, edit, and delete user accounts",teams:"Team Management - Manage team structures and assignments",employees:"Employee Management - HR employee data and profiles",attendance:"Attendance Tracking - Daily check-ins and time tracking",leaves:"Leave Management - Request and approve time off",payroll:"Payroll Management - Salary and compensation data",projects:"Project Management - Create and manage projects",tasks:"Task Management - Assign and track individual tasks",sprints:"Sprint Management - Agile development sprints",finance:"Finance Management - Budget, expenses, and revenue",analytics:"Analytics & Reporting - Data insights and reports",content:"Content Management - YouTube and course content",integrations:"Integrations - Third-party service connections"}),getActionDescriptions:()=>({create:"Can create new records",read:"Can view existing records",update:"Can modify existing records",delete:"Can remove records",approve:"Can approve requests and changes",export:"Can export data to files"})},k=P.Z.create({baseURL:"http://localhost:5000/api/audit",headers:{"Content-Type":"application/json"}});k.interceptors.request.use(e=>e,e=>Promise.reject(e));let Z={getAuditLogs:async(e={})=>{try{let s=await k.get("/",{params:e});return s.data}catch(e){return console.error("Error fetching audit logs:",e),{success:!1,data:[]}}},getAuditLogById:async e=>{try{let s=await k.get(`/${e}`);return s.data}catch(e){return console.error("Error fetching audit log:",e),{success:!1,data:{}}}},getAuditLogsByUser:async(e,s={})=>{try{let t=await k.get(`/user/${e}`,{params:s});return t.data}catch(e){return console.error("Error fetching user audit logs:",e),{success:!1,data:[]}}},getAuditStats:async(e={})=>{try{let s=await k.get("/stats",{params:e});return s.data}catch(e){return console.error("Error fetching audit stats:",e),{success:!1,data:{totalLogs:0,successfulActions:0,failedActions:0,topActions:[],topResources:[],recentActivity:[]}}}},exportAuditLogs:async(e={})=>{try{let s=await k.get("/export",{params:e,responseType:"blob"});return s.data}catch(e){throw console.error("Error exporting audit logs:",e),e}},getAvailableActions:()=>["login","logout","login_failed","permission_granted","permission_revoked","role_assigned","role_removed","user_created","user_updated","user_deleted","user_deactivated","role_created","role_updated","role_deleted","access_denied","unauthorized_access_attempt","data_exported","data_imported","password_changed","profile_updated"],getAvailableResources:()=>["user","role","permission","module","system"],getActionDescriptions:()=>({login:"User successfully logged in",logout:"User logged out",login_failed:"Failed login attempt",permission_granted:"Permission was granted to user",permission_revoked:"Permission was revoked from user",role_assigned:"Role was assigned to user",role_removed:"Role was removed from user",user_created:"New user account was created",user_updated:"User account was updated",user_deleted:"User account was deleted",user_deactivated:"User account was deactivated",role_created:"New role was created",role_updated:"Role was updated",role_deleted:"Role was deleted",access_denied:"Access was denied to resource",unauthorized_access_attempt:"Unauthorized access attempt",data_exported:"Data was exported",data_imported:"Data was imported",password_changed:"Password was changed",profile_updated:"Profile was updated"})},RolesPermissions_RolesPermissions=()=>{let[e,s]=(0,a.useState)("roles"),[t,R]=(0,a.useState)([]),[_,C]=(0,a.useState)([]),[P,E]=(0,a.useState)({totalLogs:0,successfulActions:0,failedActions:0,topActions:[],topResources:[],recentActivity:[]}),[k,L]=(0,a.useState)(!1),[q,M]=(0,a.useState)(""),[U,z]=(0,a.useState)(null),[T,F]=(0,a.useState)(!1),[$,O]=(0,a.useState)(!1),[B,I]=(0,a.useState)(!1),[Y,V]=(0,a.useState)({action:"",resource:"",success:"",startDate:"",endDate:""}),[G,K]=(0,a.useState)({name:"",description:"",permissions:{},isDefault:!1}),H=D.getAvailableModules(),Q=D.getAvailableActions(),X=D.getModuleDescriptions();D.getActionDescriptions(),(0,a.useEffect)(()=>{loadRoles(),loadAuditLogs(),loadAuditStats()},[]);let loadRoles=async()=>{try{L(!0);let e=await D.getRoles({search:q});e.success?R(e.data):R(getSampleRoles())}catch(e){console.error("Error loading roles:",e),R(getSampleRoles())}finally{L(!1)}},loadAuditLogs=async()=>{try{L(!0);let e=await Z.getAuditLogs(Y);e.success?C(e.data):C(getSampleAuditLogs())}catch(e){console.error("Error loading audit logs:",e),C(getSampleAuditLogs())}finally{L(!1)}},loadAuditStats=async()=>{try{let e=await Z.getAuditStats();e.success?E(e.data):E(getSampleAuditStats())}catch(e){console.error("Error loading audit stats:",e),E(getSampleAuditStats())}},handleCreateRole=async()=>{try{L(!0);let e=Object.entries(G.permissions).filter(([e,s])=>s.length>0).map(([e,s])=>({module:e,actions:Array.from(s)})),s={name:G.name,description:G.description,permissions:e,isDefault:G.isDefault},t=await D.createRole(s);t.success?(F(!1),resetRoleForm(),loadRoles()):console.error("Failed to create role")}catch(e){console.error("Error creating role:",e)}finally{L(!1)}},handleUpdateRole=async()=>{if(U?._id)try{L(!0);let e=Object.entries(G.permissions).filter(([e,s])=>s.length>0).map(([e,s])=>({module:e,actions:Array.from(s)})),s={name:G.name,description:G.description,permissions:e,isDefault:G.isDefault},t=await D.updateRole(U._id,s);t.success?(O(!1),resetRoleForm(),loadRoles()):console.error("Failed to update role")}catch(e){console.error("Error updating role:",e)}finally{L(!1)}},handleDeleteRole=async e=>{if(window.confirm("Are you sure you want to delete this role? This action cannot be undone."))try{L(!0);let s=await D.deleteRole(e);s.success?loadRoles():console.error("Failed to delete role")}catch(e){console.error("Error deleting role:",e)}finally{L(!1)}},handleEditRole=e=>{z(e),K({name:e.name,description:e.description,permissions:e.permissions.reduce((e,s)=>(e[s.module]=s.actions,e),{}),isDefault:e.isDefault||!1}),O(!0)},handleViewRole=e=>{z(e),I(!0)},resetRoleForm=()=>{K({name:"",description:"",permissions:{},isDefault:!1}),z(null)},handlePermissionChange=(e,s,t)=>{K(r=>({...r,permissions:{...r.permissions,[e]:t?[...r.permissions[e]||[],s]:(r.permissions[e]||[]).filter(e=>e!==s)}}))},handleExportAuditLogs=async()=>{try{let e=await Z.exportAuditLogs(Y),s=window.URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="audit-logs.csv",document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(s),document.body.removeChild(t)}catch(e){console.error("Error exporting audit logs:",e)}},J=t.filter(e=>e.name.toLowerCase().includes(q.toLowerCase())||e.description.toLowerCase().includes(q.toLowerCase())),getSampleRoles=()=>[{_id:"1",name:"Admin",description:"Full system access with all permissions",permissions:[{module:"users",actions:["create","read","update","delete","approve","export"]},{module:"teams",actions:["create","read","update","delete","approve","export"]},{module:"projects",actions:["create","read","update","delete","approve","export"]}],isDefault:!1,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{_id:"2",name:"Manager",description:"Team and project management with limited admin access",permissions:[{module:"users",actions:["read","update"]},{module:"teams",actions:["create","read","update"]},{module:"projects",actions:["create","read","update","approve"]}],isDefault:!1,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{_id:"3",name:"Employee",description:"Basic user access with limited permissions",permissions:[{module:"users",actions:["read"]},{module:"teams",actions:["read"]},{module:"projects",actions:["read","update"]}],isDefault:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"}],getSampleAuditLogs=()=>[{_id:"1",userId:"user1",action:"login",resource:"user",details:"User logged in successfully",ipAddress:"192.168.1.1",userAgent:"Mozilla/5.0...",success:!0,timestamp:"2024-01-15T10:30:00Z"},{_id:"2",userId:"user2",action:"role_created",resource:"role",details:'New role "Editor" created',ipAddress:"192.168.1.2",userAgent:"Mozilla/5.0...",success:!0,timestamp:"2024-01-15T09:15:00Z"}],getSampleAuditStats=()=>({totalLogs:1250,successfulActions:1180,failedActions:70,topActions:[{action:"login",count:450},{action:"read",count:320},{action:"update",count:180}],topResources:[{resource:"user",count:600},{resource:"project",count:400},{resource:"team",count:250}],recentActivity:getSampleAuditLogs()});return(0,r.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Roles & Permissions"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage user roles, permissions, and view audit logs"})]}),r.jsx("div",{className:"flex gap-2",children:(0,r.jsxs)(j.z,{variant:"outline",onClick:()=>{loadRoles(),loadAuditLogs(),loadAuditStats()},disabled:k,children:[r.jsx(i.Z,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),(0,r.jsxs)(S.mQ,{value:e,onValueChange:s,children:[(0,r.jsxs)(S.dr,{className:"grid w-full grid-cols-3",children:[(0,r.jsxs)(S.SP,{value:"roles",className:"flex items-center gap-2",children:[r.jsx(n.Z,{className:"h-4 w-4"}),"Roles"]}),(0,r.jsxs)(S.SP,{value:"permissions",className:"flex items-center gap-2",children:[r.jsx(l.Z,{className:"h-4 w-4"}),"Permissions Matrix"]}),(0,r.jsxs)(S.SP,{value:"audit",className:"flex items-center gap-2",children:[r.jsx(o.Z,{className:"h-4 w-4"}),"Audit Logs"]})]}),r.jsx(S.nU,{value:"roles",className:"space-y-6",children:(0,r.jsxs)(g.Zb,{children:[r.jsx(g.Ol,{children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[r.jsx(g.ll,{children:"Roles Management"}),r.jsx(g.SZ,{children:"Create, edit, and manage user roles and their permissions"})]}),(0,r.jsxs)(w.Vq,{open:T,onOpenChange:F,children:[(0,r.jsxs)(j.z,{onClick:()=>F(!0),children:[r.jsx(c.Z,{className:"h-4 w-4 mr-2"}),"Create Role"]}),(0,r.jsxs)(w.cZ,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,r.jsxs)(w.fK,{children:[r.jsx(w.$N,{children:"Create New Role"}),r.jsx(w.Be,{children:"Define a new role with specific permissions"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx(N._,{htmlFor:"name",children:"Role Name"}),r.jsx(v.I,{id:"name",value:G.name,onChange:e=>K(s=>({...s,name:e.target.value})),placeholder:"Enter role name"})]}),(0,r.jsxs)("div",{children:[r.jsx(N._,{htmlFor:"description",children:"Description"}),r.jsx(A.g,{id:"description",value:G.description,onChange:e=>K(s=>({...s,description:e.target.value})),placeholder:"Enter role description"})]}),(0,r.jsxs)("div",{children:[r.jsx(N._,{children:"Permissions"}),r.jsx("div",{className:"border rounded-lg p-4 space-y-4",children:H.map(e=>(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"font-medium text-sm",children:[e.charAt(0).toUpperCase()+e.slice(1),r.jsx("span",{className:"text-muted-foreground ml-2 text-xs",children:X[e]})]}),r.jsx("div",{className:"grid grid-cols-3 gap-2",children:Q.map(s=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(b,{id:`${e}-${s}`,checked:(G.permissions[e]||[]).includes(s),onCheckedChange:t=>handlePermissionChange(e,s,t)}),r.jsx(N._,{htmlFor:`${e}-${s}`,className:"text-sm cursor-pointer",children:s.charAt(0).toUpperCase()+s.slice(1)})]},s))})]},e))})]})]}),(0,r.jsxs)(w.cN,{children:[r.jsx(j.z,{variant:"outline",onClick:()=>F(!1),children:"Cancel"}),r.jsx(j.z,{onClick:handleCreateRole,disabled:k,children:k?(0,r.jsxs)(r.Fragment,{children:[r.jsx(d.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Role"})]})]})]})]})}),(0,r.jsxs)(g.aY,{children:[r.jsx("div",{className:"flex items-center space-x-2 mb-4",children:(0,r.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[r.jsx(u.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(v.I,{placeholder:"Search roles...",value:q,onChange:e=>M(e.target.value),className:"pl-10"})]})}),k?(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx(d.Z,{className:"h-8 w-8 animate-spin mx-auto"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Loading roles..."})]}):(0,r.jsxs)(y.iA,{children:[r.jsx(y.xD,{children:(0,r.jsxs)(y.SC,{children:[r.jsx(y.ss,{children:"Role Name"}),r.jsx(y.ss,{children:"Description"}),r.jsx(y.ss,{children:"Permissions"}),r.jsx(y.ss,{children:"Default"}),r.jsx(y.ss,{children:"Actions"})]})}),r.jsx(y.RM,{children:J.map(e=>(0,r.jsxs)(y.SC,{children:[r.jsx(y.pj,{className:"font-medium",children:e.name}),r.jsx(y.pj,{children:e.description}),r.jsx(y.pj,{children:r.jsx("div",{className:"flex flex-wrap gap-1",children:e.permissions.map((e,s)=>(0,r.jsxs)(f.C,{variant:"secondary",className:"text-xs",children:[e.module,": ",e.actions.length," actions"]},s))})}),r.jsx(y.pj,{children:e.isDefault?r.jsx(f.C,{variant:"default",children:"Default"}):r.jsx("span",{className:"text-muted-foreground",children:"-"})}),r.jsx(y.pj,{children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(j.z,{variant:"ghost",size:"sm",onClick:()=>handleViewRole(e),children:r.jsx(m.Z,{className:"h-4 w-4"})}),r.jsx(j.z,{variant:"ghost",size:"sm",onClick:()=>handleEditRole(e),children:r.jsx(p.Z,{className:"h-4 w-4"})}),r.jsx(j.z,{variant:"ghost",size:"sm",onClick:()=>handleDeleteRole(e._id),children:r.jsx(x.Z,{className:"h-4 w-4"})})]})})]},e._id))})]})]})]})}),r.jsx(S.nU,{value:"permissions",className:"space-y-6",children:(0,r.jsxs)(g.Zb,{children:[(0,r.jsxs)(g.Ol,{children:[r.jsx(g.ll,{children:"Permissions Matrix"}),r.jsx(g.SZ,{children:"Overview of all roles and their permissions across modules"})]}),r.jsx(g.aY,{children:r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)(y.iA,{children:[r.jsx(y.xD,{children:(0,r.jsxs)(y.SC,{children:[r.jsx(y.ss,{children:"Role"}),H.map(e=>r.jsx(y.ss,{className:"text-center",children:e.charAt(0).toUpperCase()+e.slice(1)},e))]})}),r.jsx(y.RM,{children:t.map(e=>(0,r.jsxs)(y.SC,{children:[r.jsx(y.pj,{className:"font-medium",children:e.name}),H.map(s=>{let t=e.permissions.find(e=>e.module===s),a=t?t.actions.length:0;return r.jsx(y.pj,{className:"text-center",children:a>0?(0,r.jsxs)(f.C,{variant:"secondary",children:[a," actions"]}):r.jsx("span",{className:"text-muted-foreground",children:"-"})},s)})]},e._id))})]})})})]})}),r.jsx(S.nU,{value:"audit",className:"space-y-6",children:(0,r.jsxs)(g.Zb,{children:[r.jsx(g.Ol,{children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[r.jsx(g.ll,{children:"Audit Logs"}),r.jsx(g.SZ,{children:"Track system activities and user actions"})]}),(0,r.jsxs)(j.z,{variant:"outline",onClick:handleExportAuditLogs,children:[r.jsx(h.Z,{className:"h-4 w-4 mr-2"}),"Export"]})]})}),(0,r.jsxs)(g.aY,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[r.jsx(g.Zb,{children:(0,r.jsxs)(g.aY,{className:"p-4",children:[r.jsx("div",{className:"text-2xl font-bold",children:P.totalLogs}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Logs"})]})}),r.jsx(g.Zb,{children:(0,r.jsxs)(g.aY,{className:"p-4",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:P.successfulActions}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Successful"})]})}),r.jsx(g.Zb,{children:(0,r.jsxs)(g.aY,{className:"p-4",children:[r.jsx("div",{className:"text-2xl font-bold text-red-600",children:P.failedActions}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Failed"})]})}),r.jsx(g.Zb,{children:(0,r.jsxs)(g.aY,{className:"p-4",children:[r.jsx("div",{className:"text-2xl font-bold",children:P.recentActivity.length}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Recent Activity"})]})})]}),(0,r.jsxs)(y.iA,{children:[r.jsx(y.xD,{children:(0,r.jsxs)(y.SC,{children:[r.jsx(y.ss,{children:"Timestamp"}),r.jsx(y.ss,{children:"Action"}),r.jsx(y.ss,{children:"Resource"}),r.jsx(y.ss,{children:"Details"}),r.jsx(y.ss,{children:"Status"})]})}),r.jsx(y.RM,{children:_.map(e=>(0,r.jsxs)(y.SC,{children:[r.jsx(y.pj,{children:new Date(e.timestamp).toLocaleString()}),r.jsx(y.pj,{children:r.jsx(f.C,{variant:e.success?"default":"destructive",children:e.action})}),r.jsx(y.pj,{children:e.resource}),r.jsx(y.pj,{children:e.details}),r.jsx(y.pj,{children:r.jsx(f.C,{variant:e.success?"default":"destructive",children:e.success?"Success":"Failed"})})]},e._id))})]})]})]})})]}),r.jsx(w.Vq,{open:B,onOpenChange:I,children:(0,r.jsxs)(w.cZ,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,r.jsxs)(w.fK,{children:[(0,r.jsxs)(w.$N,{children:["Role Details: ",U?.name]}),r.jsx(w.Be,{children:U?.description})]}),U&&r.jsx("div",{className:"space-y-4",children:(0,r.jsxs)("div",{children:[r.jsx(N._,{children:"Permissions"}),r.jsx("div",{className:"border rounded-lg p-4 space-y-4",children:H.map(e=>{let s=U.permissions.find(s=>s.module===e);return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"font-medium text-sm",children:[e.charAt(0).toUpperCase()+e.slice(1),r.jsx("span",{className:"text-muted-foreground ml-2 text-xs",children:X[e]})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:s?s.actions.map(e=>r.jsx(f.C,{variant:"secondary",className:"text-xs",children:e.charAt(0).toUpperCase()+e.slice(1)},e)):r.jsx("span",{className:"text-muted-foreground text-sm",children:"No permissions"})})]},e)})})]})})]})}),r.jsx(w.Vq,{open:$,onOpenChange:O,children:(0,r.jsxs)(w.cZ,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,r.jsxs)(w.fK,{children:[(0,r.jsxs)(w.$N,{children:["Edit Role: ",U?.name]}),r.jsx(w.Be,{children:"Modify role permissions and settings"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx(N._,{htmlFor:"edit-name",children:"Role Name"}),r.jsx(v.I,{id:"edit-name",value:G.name,onChange:e=>K(s=>({...s,name:e.target.value})),placeholder:"Enter role name"})]}),(0,r.jsxs)("div",{children:[r.jsx(N._,{htmlFor:"edit-description",children:"Description"}),r.jsx(A.g,{id:"edit-description",value:G.description,onChange:e=>K(s=>({...s,description:e.target.value})),placeholder:"Enter role description"})]}),(0,r.jsxs)("div",{children:[r.jsx(N._,{children:"Permissions"}),r.jsx("div",{className:"border rounded-lg p-4 space-y-4",children:H.map(e=>(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"font-medium text-sm",children:[e.charAt(0).toUpperCase()+e.slice(1),r.jsx("span",{className:"text-muted-foreground ml-2 text-xs",children:X[e]})]}),r.jsx("div",{className:"grid grid-cols-3 gap-2",children:Q.map(s=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(b,{id:`edit-${e}-${s}`,checked:(G.permissions[e]||[]).includes(s),onCheckedChange:t=>handlePermissionChange(e,s,t)}),r.jsx(N._,{htmlFor:`edit-${e}-${s}`,className:"text-sm cursor-pointer",children:s.charAt(0).toUpperCase()+s.slice(1)})]},s))})]},e))})]})]}),(0,r.jsxs)(w.cN,{children:[r.jsx(j.z,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),r.jsx(j.z,{onClick:handleUpdateRole,disabled:k,children:k?(0,r.jsxs)(r.Fragment,{children:[r.jsx(d.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Role"})]})]})})]})}},24109:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>RolesPermissionsPage});var r=t(4656),a=t(95153);let i=(0,a.createProxy)(String.raw`D:\SAAS\ERP\ERP\frontend-nextjs\src\components\pages\RolesPermissions\RolesPermissions.tsx`),{__esModule:n,$$typeof:l}=i,o=i.default;function RolesPermissionsPage(){return r.jsx(o,{})}}};var s=require("../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[2343,6578,9702,6776,6642,5371,3219,7608,7040,7133,1932,3342,3343],()=>__webpack_exec__(49450));module.exports=t})();