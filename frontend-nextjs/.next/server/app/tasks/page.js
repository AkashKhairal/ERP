(()=>{var e={};e.id=7289,e.ids=[7289],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},2506:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>o,routeModule:()=>h,tree:()=>c});var a=t(67096),r=t(16132),i=t(37284),n=t.n(i),l=t(32564),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(s,d);let c=["",{children:["tasks",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,47221)),"D:\\SAAS\\ERP\\ERP\\frontend-nextjs\\src\\app\\tasks\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,51069)),"D:\\SAAS\\ERP\\ERP\\frontend-nextjs\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],o=["D:\\SAAS\\ERP\\ERP\\frontend-nextjs\\src\\app\\tasks\\page.tsx"],u="/tasks/page",m={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/tasks/page",pathname:"/tasks",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},17454:(e,s,t)=>{Promise.resolve().then(t.bind(t,51708))},51708:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>Tasks_KanbanBoard});var a=t(30784),r=t(9885),i=t(71295),n=t(9646),l=t(15276),d=t(88533),c=t(85928),o=t(96215),u=t(8965),m=t(60877),h=t(3285),x=t(19917),p=t(29769),g=t(7819),j=t(98401),v=t(78205),f=t(49384),y=t(80358),k=t(27031),w=t(87065),T=t(43128),N=t(24483),b=t(4711),C=t(97040),D=t(45304),S=t(17133),_=t(57505),A=t(7950),P=t(57550),E=t(3508),Z=t(37565),B=t(86847),$=t(24846),q=t(21145);let H=q.Z.create({baseURL:"http://localhost:5000/api/tasks",headers:{"Content-Type":"application/json"}});H.interceptors.request.use(e=>e,e=>Promise.reject(e));let F={async getTasks(e={}){try{let s=new URLSearchParams;Object.entries(e).forEach(([e,t])=>{t&&s.append(e,t.toString())});let t=await H.get(`?${s.toString()}`);if(t.data&&t.data.success)return{success:!0,data:Array.isArray(t.data.data)?t.data.data:[]};if(Array.isArray(t.data))return{success:!0,data:t.data};return{success:!0,data:[]}}catch(e){return console.error("Error fetching tasks:",e),{success:!1,error:e.response?.data?.message||"Failed to fetch tasks"}}},async getTaskById(e){try{let s=await H.get(`/${e}`);return{success:!0,data:s.data}}catch(e){return console.error("Error fetching task:",e),{success:!1,error:e.response?.data?.message||"Failed to fetch task"}}},async createTask(e){try{let s=await H.post("/",e);return{success:!0,data:s.data}}catch(e){return console.error("Error creating task:",e),{success:!1,error:e.response?.data?.message||"Failed to create task"}}},async updateTask(e,s){try{let t=await H.put(`/${e}`,s);return{success:!0,data:t.data}}catch(e){return console.error("Error updating task:",e),{success:!1,error:e.response?.data?.message||"Failed to update task"}}},async deleteTask(e){try{let s=await H.delete(`/${e}`);return{success:!0,data:s.data}}catch(e){return console.error("Error deleting task:",e),{success:!1,error:e.response?.data?.message||"Failed to delete task"}}},async updateTaskStatus(e,s){try{let t=await H.patch(`/${e}/status`,{status:s});return{success:!0,data:t.data}}catch(e){return console.error("Error updating task status:",e),{success:!1,error:e.response?.data?.message||"Failed to update task status"}}},async assignTask(e,s){try{let t=await H.patch(`/${e}/assign`,{userId:s});return{success:!0,data:t.data}}catch(e){return console.error("Error assigning task:",e),{success:!1,error:e.response?.data?.message||"Failed to assign task"}}},async addComment(e,s){try{let t=await H.post(`/${e}/comments`,{content:s});return{success:!0,data:t.data}}catch(e){return console.error("Error adding comment:",e),{success:!1,error:e.response?.data?.message||"Failed to add comment"}}},async addSubtask(e,s){try{let t=await H.post(`/${e}/subtasks`,{title:s});return{success:!0,data:t.data}}catch(e){return console.error("Error adding subtask:",e),{success:!1,error:e.response?.data?.message||"Failed to add subtask"}}},async completeSubtask(e,s){try{let t=await H.patch(`/${e}/subtasks/${s}/complete`);return{success:!0,data:t.data}}catch(e){return console.error("Error completing subtask:",e),{success:!1,error:e.response?.data?.message||"Failed to complete subtask"}}},async getTaskStats(){try{let e=await H.get("/stats");return{success:!0,data:e.data}}catch(e){return console.error("Error fetching task stats:",e),{success:!1,error:e.response?.data?.message||"Failed to fetch task stats"}}},async getOverdueTasks(){try{let e=await H.get("/overdue");return{success:!0,data:e.data}}catch(e){return console.error("Error fetching overdue tasks:",e),{success:!1,error:e.response?.data?.message||"Failed to fetch overdue tasks"}}},async getMyTasks(e){try{let s=e?`?status=${e}`:"",t=await H.get(`/my-tasks${s}`);return{success:!0,data:t.data}}catch(e){return console.error("Error fetching my tasks:",e),{success:!1,error:e.response?.data?.message||"Failed to fetch my tasks"}}},getAvailableTypes:()=>["feature","bug","improvement","content","design","testing","deployment","other"],getAvailableStatuses:()=>["todo","doing","review","done","cancelled"],getAvailablePriorities:()=>["low","medium","high","urgent"],getSampleTasks:()=>({todo:[{_id:"1",title:"Design new landing page",description:"Create wireframes and mockups for the new landing page",project:"project1",status:"todo",priority:"high",type:"design",assignedTo:"user1",assignedBy:"user1",dueDate:"2024-02-10",estimatedHours:16,actualHours:0,progress:0,comments:[],subtasks:[],isActive:!0,createdAt:"2024-01-15T00:00:00Z",updatedAt:"2024-01-15T00:00:00Z"},{_id:"2",title:"Set up CI/CD pipeline",description:"Configure automated testing and deployment pipeline",project:"project1",status:"todo",priority:"medium",type:"deployment",assignedTo:"user2",assignedBy:"user1",dueDate:"2024-02-12",estimatedHours:24,actualHours:0,progress:0,comments:[],subtasks:[],isActive:!0,createdAt:"2024-01-14T00:00:00Z",updatedAt:"2024-01-14T00:00:00Z"}],doing:[{_id:"3",title:"Implement user authentication",description:"Build JWT-based authentication system",project:"project1",status:"doing",priority:"urgent",type:"feature",assignedTo:"user3",assignedBy:"user1",dueDate:"2024-02-08",estimatedHours:32,actualHours:12,progress:37,comments:[],subtasks:[],isActive:!0,createdAt:"2024-01-10T00:00:00Z",updatedAt:"2024-01-10T00:00:00Z"}],review:[{_id:"5",title:"Database optimization",description:"Optimize database queries and indexes",project:"project1",status:"review",priority:"high",type:"improvement",assignedTo:"user4",assignedBy:"user1",dueDate:"2024-02-09",estimatedHours:20,actualHours:8,progress:40,comments:[],subtasks:[],isActive:!0,createdAt:"2024-01-12T00:00:00Z",updatedAt:"2024-01-12T00:00:00Z"}],done:[{_id:"4",title:"API documentation",description:"Create comprehensive API documentation",project:"project1",status:"done",priority:"medium",type:"content",assignedTo:"user5",assignedBy:"user1",dueDate:"2024-01-31",estimatedHours:8,actualHours:6,progress:100,comments:[],subtasks:[],isActive:!0,createdAt:"2024-01-08T00:00:00Z",updatedAt:"2024-01-08T00:00:00Z"}]}),getSampleTaskStats:()=>({totalTasks:4,completedTasks:1,overdueTasks:0,tasksByStatus:[{status:"todo",count:2},{status:"doing",count:1},{status:"review",count:1},{status:"done",count:1}],tasksByPriority:[{priority:"urgent",count:1},{priority:"high",count:2},{priority:"medium",count:2}],tasksByType:[{type:"design",count:1},{type:"deployment",count:1},{type:"feature",count:1},{type:"improvement",count:1},{type:"content",count:1}]})};var z=t(30323),I=t(77732);let Tasks_KanbanBoard=()=>{let{user:e,logActivity:s}=(0,$.a)(),[t,q]=(0,r.useState)({todo:[],doing:[],review:[],done:[]}),[H,U]=(0,r.useState)(!0),[O,Q]=(0,r.useState)(""),[R,V]=(0,r.useState)("all"),[L,M]=(0,r.useState)("all"),[K,Y]=(0,r.useState)("all"),[G,W]=(0,r.useState)("all"),[X,J]=(0,r.useState)([]),[ee,es]=(0,r.useState)([]),[et,ea]=(0,r.useState)(null),[er,ei]=(0,r.useState)(null),[en,el]=(0,r.useState)(!1),[ed,ec]=(0,r.useState)(!1),[eo,eu]=(0,r.useState)(!1),[em,eh]=(0,r.useState)(!1),[ex,ep]=(0,r.useState)(!1),[eg,ej]=(0,r.useState)(!1),[ev,ef]=(0,r.useState)(!1),[ey,ek]=(0,r.useState)(!1),[ew,eT]=(0,r.useState)(new Set),[eN,eb]=(0,r.useState)({title:"",description:"",project:"",priority:"medium",type:"feature",assignedTo:"",dueDate:"",estimatedHours:0,labels:[],tags:[]}),[eC,eD]=(0,r.useState)(""),[eS,e_]=(0,r.useState)(""),[eA,eP]=(0,r.useState)(""),[eE,eZ]=(0,r.useState)({hours:0,minutes:0}),[eB,e$]=(0,r.useState)(!1),[eq,eH]=(0,r.useState)(null),[eF,ez]=(0,r.useState)(null),[eI,eU]=(0,r.useState)(null),[eO,eQ]=(0,r.useState)(!1),[eR,eV]=(0,r.useState)(new Set),eL=[{id:"todo",title:"To Do",color:"bg-gray-100",icon:i.Z},{id:"doing",title:"In Progress",color:"bg-blue-100",icon:n.Z},{id:"review",title:"Review",color:"bg-yellow-100",icon:l.Z},{id:"done",title:"Done",color:"bg-green-100",icon:d.Z}],eM=(0,r.useCallback)(async()=>{U(!0);try{let e=await F.getTasks();if(e.success){let s=e.data,t={todo:s.filter(e=>"todo"===e.status),doing:s.filter(e=>"doing"===e.status),review:s.filter(e=>"review"===e.status),done:s.filter(e=>"done"===e.status)};q(t)}else q(F.getSampleTasks());let s=await z.W.getUsers();s.success&&J(s.data);let t=await I.B.getProjects();t.success&&es(t.data);let a=await F.getTaskStats();a.success?ea(a.data):ea(F.getSampleTaskStats())}catch(e){console.error("Error loading data:",e),q(F.getSampleTasks()),ea(F.getSampleTaskStats())}finally{U(!1)}},[]);(0,r.useEffect)(()=>{eM(),s("Kanban Board Visit","User accessed task management board")},[eM,s]);let handleDragStart=(e,s,t)=>{ez({id:s,type:"task",sourceColumn:t}),eQ(!0),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html","")},handleDragOver=(e,s)=>{e.preventDefault(),eU(s)},handleDragLeave=()=>{eU(null)},handleDrop=async(e,t)=>{if(e.preventDefault(),!eF)return;let{id:a,sourceColumn:r}=eF;if(r===t){ez(null),eU(null),eQ(!1);return}try{let e=await F.updateTaskStatus(a,t);e.success&&(q(e=>{let s={...e};s[r]=s[r].filter(e=>e._id!==a);let i=e[r].find(e=>e._id===a);if(i){let e={...i,status:t};s[t]=[...s[t],e]}return s}),eV(e=>new Set([...Array.from(e),a])),setTimeout(()=>{eV(e=>{let s=new Set(e);return s.delete(a),s})},300),s("Task Status Updated",`Task moved from ${r} to ${t}`))}catch(e){console.error("Error updating task status:",e)}ez(null),eU(null),eQ(!1)},handleAddTask=e=>{eb({title:"",description:"",project:ee[0]?._id||"",priority:"medium",type:"feature",assignedTo:"",dueDate:"",estimatedHours:0,labels:[],tags:[]}),el(!0)},handleEditTask=e=>{ei(e),eb({title:e.title,description:e.description||"",project:e.project,priority:e.priority,type:e.type,assignedTo:e.assignedTo||"",dueDate:e.dueDate.split("T")[0],estimatedHours:e.estimatedHours||0,labels:e.labels||[],tags:e.tags||[]}),el(!0)},handleDeleteTask=e=>{ei(e),ec(!0)},handleConfirmDelete=async()=>{if(er){try{let e=await F.deleteTask(er._id);e.success&&(q(e=>{let s={...e};return s[er.status]=s[er.status].filter(e=>e._id!==er._id),s}),s("Task Deleted",`Deleted task: ${er.title}`))}catch(e){console.error("Error deleting task:",e)}ec(!1),ei(null)}},handleSaveTask=async()=>{try{if(er){let e=await F.updateTask(er._id,eN);e.success&&(q(e=>{let s={...e},t=s[er.status].findIndex(e=>e._id===er._id);return -1!==t&&(s[er.status][t]={...er,...eN}),s}),s("Task Updated",`Updated task: ${eN.title}`))}else{let t=await F.createTask({...eN,status:"todo",assignedBy:e?._id||"",createdBy:e?._id||""});if(t.success){let e=t.data;q(s=>({...s,todo:[...s.todo,e]})),s("Task Created",`Created new task: ${eN.title}`)}}}catch(e){console.error("Error saving task:",e)}el(!1),ei(null)},handleAddComment=async()=>{if(er&&eC.trim())try{let e=await F.addComment(er._id,eC);e.success&&(q(s=>{let t={...s},a=t[er.status].findIndex(e=>e._id===er._id);return -1!==a&&(t[er.status][a]={...t[er.status][a],comments:[...t[er.status][a].comments||[],e.data]}),t}),eD(""),eu(!1),s("Comment Added",`Added comment to task: ${er.title}`))}catch(e){console.error("Error adding comment:",e)}},handleSaveTimeTracking=async()=>{if(!er)return;let e=60*eE.hours+eE.minutes;if(0!==e)try{let t=await F.updateTask(er._id,{actualHours:(er.actualHours||0)+e/60});t.success&&(q(s=>{let t={...s},a=t[er.status].findIndex(e=>e._id===er._id);return -1!==a&&(t[er.status][a]={...t[er.status][a],actualHours:(t[er.status][a].actualHours||0)+e/60}),t}),eZ({hours:0,minutes:0}),eh(!1),s("Time Tracking Updated",`Added ${e} minutes to task: ${er.title}`))}catch(e){console.error("Error updating time tracking:",e)}},getPriorityColor=e=>{switch(e){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},getTypeIcon=e=>{switch(e){case"design":return"\uD83C\uDFA8";case"development":return"\uD83D\uDCBB";case"documentation":return"\uD83D\uDCDD";case"testing":return"\uD83E\uDDEA";case"bug":return"\uD83D\uDC1B";case"feature":return"✨";case"improvement":case"deployment":return"\uD83D\uDE80";case"content":return"\uD83D\uDCC4";default:return"\uD83D\uDCCB"}},isOverdue=e=>new Date(e)<new Date,getProgressPercentage=e=>{if(e.subtasks&&e.subtasks.length>0){let s=e.subtasks.filter(e=>e.completed).length;return s/e.subtasks.length*100}return e.progress||0},eK=Object.keys(t).reduce((e,s)=>(e[s]=t[s].filter(e=>{let s=""===O||e.title.toLowerCase().includes(O.toLowerCase())||e.description&&e.description.toLowerCase().includes(O.toLowerCase()),t="all"===R||e.priority===R,a="all"===L||e.type===L,r="all"===K||e.project===K,i="all"===G||e.assignedTo===G;return s&&t&&a&&r&&i}),e),{});return H?(0,a.jsxs)("div",{className:"flex items-center justify-center h-64",children:[a.jsx(c.Z,{className:"h-8 w-8 animate-spin"}),a.jsx("span",{className:"ml-2",children:"Loading tasks..."})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Task Management"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage tasks with Kanban board"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(D.z,{variant:"outline",onClick:()=>window.print(),children:[a.jsx(o.Z,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,a.jsxs)(D.z,{onClick:()=>handleAddTask("todo"),children:[a.jsx(u.Z,{className:"h-4 w-4 mr-2"}),"New Task"]})]})]}),et&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(C.Zb,{children:a.jsx(C.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Tasks"}),a.jsx("p",{className:"text-2xl font-bold",children:et.totalTasks})]}),a.jsx(m.Z,{className:"h-8 w-8 text-blue-500"})]})})}),a.jsx(C.Zb,{children:a.jsx(C.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Completed"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:et.completedTasks})]}),a.jsx(d.Z,{className:"h-8 w-8 text-green-500"})]})})}),a.jsx(C.Zb,{children:a.jsx(C.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Overdue"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:et.overdueTasks})]}),a.jsx(h.Z,{className:"h-8 w-8 text-red-500"})]})})}),a.jsx(C.Zb,{children:a.jsx(C.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Progress"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:[et.totalTasks>0?Math.round(et.completedTasks/et.totalTasks*100):0,"%"]})]}),a.jsx(x.Z,{className:"h-8 w-8 text-purple-500"})]})})})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[a.jsx(p.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(_.I,{placeholder:"Search tasks...",value:O,onChange:e=>Q(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(A.Ph,{value:R,onValueChange:V,children:[a.jsx(A.i4,{className:"w-[180px]",children:a.jsx(A.ki,{placeholder:"Priority"})}),(0,a.jsxs)(A.Bw,{children:[a.jsx(A.Ql,{value:"all",children:"All Priorities"}),a.jsx(A.Ql,{value:"urgent",children:"Urgent"}),a.jsx(A.Ql,{value:"high",children:"High"}),a.jsx(A.Ql,{value:"medium",children:"Medium"}),a.jsx(A.Ql,{value:"low",children:"Low"})]})]}),(0,a.jsxs)(A.Ph,{value:L,onValueChange:M,children:[a.jsx(A.i4,{className:"w-[180px]",children:a.jsx(A.ki,{placeholder:"Type"})}),(0,a.jsxs)(A.Bw,{children:[a.jsx(A.Ql,{value:"all",children:"All Types"}),F.getAvailableTypes().map(e=>a.jsx(A.Ql,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]})]}),(0,a.jsxs)(A.Ph,{value:K,onValueChange:Y,children:[a.jsx(A.i4,{className:"w-[180px]",children:a.jsx(A.ki,{placeholder:"Project"})}),(0,a.jsxs)(A.Bw,{children:[a.jsx(A.Ql,{value:"all",children:"All Projects"}),ee.map(e=>a.jsx(A.Ql,{value:e._id,children:e.name},e._id))]})]}),(0,a.jsxs)(A.Ph,{value:G,onValueChange:W,children:[a.jsx(A.i4,{className:"w-[180px]",children:a.jsx(A.ki,{placeholder:"Assigned To"})}),(0,a.jsxs)(A.Bw,{children:[a.jsx(A.Ql,{value:"all",children:"All Users"}),X.map(e=>(0,a.jsxs)(A.Ql,{value:e._id,children:[e.firstName," ",e.lastName]},e._id))]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:eL.map(e=>(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(e.icon,{className:"h-5 w-5"}),a.jsx("h3",{className:"font-semibold text-lg",children:e.title})]}),a.jsx(S.C,{variant:"secondary",children:eK[e.id]?.length||0})]}),a.jsx("div",{className:`p-4 rounded-lg ${e.color} min-h-[500px] transition-all duration-200 ${eI===e.id?"ring-2 ring-blue-500 bg-blue-50":""}`,onDragOver:s=>handleDragOver(s,e.id),onDragLeave:handleDragLeave,onDrop:s=>handleDrop(s,e.id),children:(0,a.jsxs)("div",{className:"space-y-3",children:[eK[e.id]?.map(s=>a.jsx(C.Zb,{className:`cursor-pointer hover:shadow-md transition-all duration-200 ${eO&&eF?.id===s._id?"opacity-50 scale-95":""} ${eR.has(s._id)?"animate-pulse":""}`,draggable:!0,onDragStart:t=>handleDragStart(t,s._id,e.id),children:a.jsx(C.aY,{className:"p-4",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-lg",children:getTypeIcon(s.type)}),a.jsx("h4",{className:"font-medium text-sm",children:s.title})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(S.C,{className:getPriorityColor(s.priority),children:s.priority}),a.jsx(D.z,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),ei(s)},children:a.jsx(g.Z,{className:"h-4 w-4"})})]})]}),s.description&&a.jsx("p",{className:"text-xs text-muted-foreground",children:s.description}),s.subtasks&&s.subtasks.length>0&&a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{children:"Progress"}),a.jsxs("span",{children:[Math.round(getProgressPercentage(s)),"%"]})]}),a.jsx(B.E,{value:getProgressPercentage(s),className:"h-2"})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(j.Z,{className:"h-3 w-3"}),a.jsx("span",{children:X.find(e=>e._id===s.assignedTo)?.firstName||"Unassigned"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(v.Z,{className:"h-3 w-3"}),a.jsx("span",{className:isOverdue(s.dueDate)?"text-red-600 font-medium":"",children:new Date(s.dueDate).toLocaleDateString()})]})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(f.Z,{className:"h-3 w-3"}),a.jsxs("span",{children:[s.actualHours||0,"h / ",s.estimatedHours||0,"h"]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(y.Z,{className:"h-3 w-3"}),a.jsxs("span",{children:[s.progress||0,"%"]})]})]}),s.comments&&s.comments.length>0&&a.jsxs("div",{className:"flex items-center space-x-1 text-xs text-muted-foreground",children:[a.jsx(k.Z,{className:"h-3 w-3"}),a.jsxs("span",{children:[s.comments.length," comments"]})]}),a.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[a.jsxs(D.z,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),handleEditTask(s)},className:"flex-1",children:[a.jsx(w.Z,{className:"h-3 w-3 mr-1"}),"Edit"]}),a.jsx(D.z,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),handleDeleteTask(s)},children:a.jsx(T.Z,{className:"h-3 w-3"})})]})]})})},s._id)),(0,a.jsxs)(D.z,{variant:"outline",className:"w-full",onClick:()=>handleAddTask(e.id),children:[a.jsx(u.Z,{className:"h-4 w-4 mr-2"}),"Add Task"]})]})})]},e.id))}),a.jsx(E.Vq,{open:en,onOpenChange:el,children:(0,a.jsxs)(E.cZ,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(E.fK,{children:[a.jsx(E.$N,{children:er?"Edit Task":"Create New Task"}),a.jsx(E.Be,{children:er?"Update task details below.":"Fill in the task details below."})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx(Z._,{htmlFor:"title",children:"Title"}),a.jsx(_.I,{id:"title",value:eN.title,onChange:e=>eb(s=>({...s,title:e.target.value})),placeholder:"Enter task title"})]}),(0,a.jsxs)("div",{children:[a.jsx(Z._,{htmlFor:"type",children:"Type"}),(0,a.jsxs)(A.Ph,{value:eN.type,onValueChange:e=>eb(s=>({...s,type:e})),children:[a.jsx(A.i4,{children:a.jsx(A.ki,{})}),a.jsx(A.Bw,{children:F.getAvailableTypes().map(e=>a.jsx(A.Ql,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx(Z._,{htmlFor:"description",children:"Description"}),a.jsx(P.g,{id:"description",value:eN.description,onChange:e=>eb(s=>({...s,description:e.target.value})),placeholder:"Enter task description",rows:3})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx(Z._,{htmlFor:"project",children:"Project"}),(0,a.jsxs)(A.Ph,{value:eN.project,onValueChange:e=>eb(s=>({...s,project:e})),children:[a.jsx(A.i4,{children:a.jsx(A.ki,{placeholder:"Select project"})}),a.jsx(A.Bw,{children:ee.map(e=>a.jsx(A.Ql,{value:e._id,children:e.name},e._id))})]})]}),(0,a.jsxs)("div",{children:[a.jsx(Z._,{htmlFor:"assignedTo",children:"Assigned To"}),(0,a.jsxs)(A.Ph,{value:eN.assignedTo,onValueChange:e=>eb(s=>({...s,assignedTo:e})),children:[a.jsx(A.i4,{children:a.jsx(A.ki,{placeholder:"Select user"})}),a.jsx(A.Bw,{children:X.map(e=>(0,a.jsxs)(A.Ql,{value:e._id,children:[e.firstName," ",e.lastName]},e._id))})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx(Z._,{htmlFor:"priority",children:"Priority"}),(0,a.jsxs)(A.Ph,{value:eN.priority,onValueChange:e=>eb(s=>({...s,priority:e})),children:[a.jsx(A.i4,{children:a.jsx(A.ki,{})}),a.jsx(A.Bw,{children:F.getAvailablePriorities().map(e=>a.jsx(A.Ql,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})]}),(0,a.jsxs)("div",{children:[a.jsx(Z._,{htmlFor:"dueDate",children:"Due Date"}),a.jsx(_.I,{id:"dueDate",type:"date",value:eN.dueDate,onChange:e=>eb(s=>({...s,dueDate:e.target.value}))})]}),(0,a.jsxs)("div",{children:[a.jsx(Z._,{htmlFor:"estimatedHours",children:"Estimated Hours"}),a.jsx(_.I,{id:"estimatedHours",type:"number",value:eN.estimatedHours,onChange:e=>eb(s=>({...s,estimatedHours:parseFloat(e.target.value)||0})),min:"0",step:"0.5"})]})]})]}),(0,a.jsxs)(E.cN,{children:[a.jsx(D.z,{variant:"outline",onClick:()=>el(!1),children:"Cancel"}),(0,a.jsxs)(D.z,{onClick:handleSaveTask,children:[a.jsx(N.Z,{className:"h-4 w-4 mr-2"}),er?"Update Task":"Create Task"]})]})]})}),a.jsx(E.Vq,{open:ed,onOpenChange:ec,children:(0,a.jsxs)(E.cZ,{children:[(0,a.jsxs)(E.fK,{children:[a.jsx(E.$N,{children:"Delete Task"}),(0,a.jsxs)(E.Be,{children:['Are you sure you want to delete "',er?.title,'"? This action cannot be undone.']})]}),(0,a.jsxs)(E.cN,{children:[a.jsx(D.z,{variant:"outline",onClick:()=>ec(!1),children:"Cancel"}),(0,a.jsxs)(D.z,{variant:"destructive",onClick:handleConfirmDelete,children:[a.jsx(T.Z,{className:"h-4 w-4 mr-2"}),"Delete Task"]})]})]})}),a.jsx(E.Vq,{open:eo,onOpenChange:eu,children:(0,a.jsxs)(E.cZ,{children:[(0,a.jsxs)(E.fK,{children:[a.jsx(E.$N,{children:"Add Comment"}),(0,a.jsxs)(E.Be,{children:['Add a comment to "',er?.title,'"']})]}),a.jsx("div",{className:"space-y-4",children:a.jsx(P.g,{value:eC,onChange:e=>eD(e.target.value),placeholder:"Enter your comment...",rows:3})}),(0,a.jsxs)(E.cN,{children:[a.jsx(D.z,{variant:"outline",onClick:()=>eu(!1),children:"Cancel"}),(0,a.jsxs)(D.z,{onClick:handleAddComment,children:[a.jsx(k.Z,{className:"h-4 w-4 mr-2"}),"Add Comment"]})]})]})}),a.jsx(E.Vq,{open:em,onOpenChange:eh,children:(0,a.jsxs)(E.cZ,{children:[(0,a.jsxs)(E.fK,{children:[a.jsx(E.$N,{children:"Time Tracking"}),(0,a.jsxs)(E.Be,{children:['Track time spent on "',er?.title,'"']})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx(Z._,{htmlFor:"hours",children:"Hours"}),a.jsx(_.I,{id:"hours",type:"number",value:eE.hours,onChange:e=>eZ(s=>({...s,hours:parseInt(e.target.value)||0})),min:"0"})]}),(0,a.jsxs)("div",{children:[a.jsx(Z._,{htmlFor:"minutes",children:"Minutes"}),a.jsx(_.I,{id:"minutes",type:"number",value:eE.minutes,onChange:e=>eZ(s=>({...s,minutes:parseInt(e.target.value)||0})),min:"0",max:"59"})]})]}),eB&&(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Time tracking active"}),(0,a.jsxs)("p",{className:"text-lg font-mono",children:[eq?Math.floor((Date.now()-eq.getTime())/1e3/60):0," minutes"]})]})]}),(0,a.jsxs)(E.cN,{children:[a.jsx(D.z,{variant:"outline",onClick:()=>eh(!1),children:"Cancel"}),eB?(0,a.jsxs)(D.z,{onClick:()=>{e$(!1),eH(null)},children:[a.jsx(b.Z,{className:"h-4 w-4 mr-2"}),"Stop Tracking"]}):(0,a.jsxs)(D.z,{onClick:()=>{e$(!0),eH(new Date)},children:[a.jsx(n.Z,{className:"h-4 w-4 mr-2"}),"Start Tracking"]}),(0,a.jsxs)(D.z,{onClick:handleSaveTimeTracking,children:[a.jsx(N.Z,{className:"h-4 w-4 mr-2"}),"Save Time"]})]})]})})]})}},86847:(e,s,t)=>{"use strict";t.d(s,{E:()=>l});var a=t(30784),r=t(9885),i=t(81915),n=t(80467);let l=r.forwardRef(({className:e,value:s,...t},r)=>a.jsx(i.fC,{ref:r,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...t,children:a.jsx(i.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));l.displayName=i.fC.displayName},57550:(e,s,t)=>{"use strict";t.d(s,{g:()=>n});var a=t(30784),r=t(9885),i=t(80467);let n=r.forwardRef(({className:e,...s},t)=>a.jsx("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...s}));n.displayName="Textarea"},47221:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>TasksPage});var a=t(4656),r=t(95153);let i=(0,r.createProxy)(String.raw`D:\SAAS\ERP\ERP\frontend-nextjs\src\components\pages\Tasks\KanbanBoard.tsx`),{__esModule:n,$$typeof:l}=i,d=i.default;function TasksPage(){return a.jsx(d,{})}}};var s=require("../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[2343,6578,9702,6776,274,6642,5444,1966,7608,7040,7133,7950,1932,7732,323],()=>__webpack_exec__(2506));module.exports=t})();