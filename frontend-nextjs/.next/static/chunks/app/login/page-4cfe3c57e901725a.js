(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2626],{93547:function(e,t,r){Promise.resolve().then(r.bind(r,4323))},4323:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Auth_Login}});var s=r(57437),o=r(2265),n=r(61396),i=r.n(n),a=r(24033),l=r(61865),d=r(58144),c=r(17865);let u=(0,c.Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var m=r(81184),h=r(61023),x=r(5925),f=r(40220),g=r(34490),v=r(3089),p=r(86582),Auth_Login=()=>{let[e,t]=(0,o.useState)(!1),{login:r,googleSignIn:n,isAuthenticated:c,loading:b}=(0,g.a)(),y=(0,a.useRouter)(),{register:j,handleSubmit:w,formState:{errors:N,isSubmitting:k}}=(0,l.cI)();(0,o.useEffect)(()=>{"undefined"!=typeof document&&(document.documentElement.classList.remove("dark"),document.documentElement.style.colorScheme="light",document.body.style.backgroundColor="#ffffff",document.body.style.color="#000000")},[]);let onSubmit=async e=>{try{await r(e.email,e.password)}catch(e){x.Am.error(e.message||"Login failed")}},handleGoogleSuccess=async e=>{try{if(console.log("Google sign-in response:",e),!e.credential){x.Am.error("Google sign-in failed: No credential received");return}await n(e.credential)}catch(e){console.error("Google sign-in error:",e),x.Am.error(e.message||"Google Sign-In failed")}},handleGoogleError=e=>{console.error("Google sign-in error:",e),x.Am.error("Google Sign-In failed. Please try again.")};return c?(y.push("/dashboard"),null):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8 p-8",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"mx-auto h-12 w-12 bg-primary rounded-lg flex items-center justify-center mb-4",children:(0,s.jsx)("span",{className:"text-primary-foreground font-bold text-lg",children:"CB"})}),(0,s.jsx)("h2",{className:"text-3xl font-bold text-foreground",children:"Welcome to CreatorBase"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"Sign in to your account to continue"})]}),(0,s.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:w(onSubmit),children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),(0,s.jsxs)("div",{className:"mt-1 relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(d.Z,{className:"h-5 w-5 text-gray-400"})}),(0,s.jsx)(p.I,{id:"email",type:"email",autoComplete:"email",...j("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),className:"pl-10 ".concat(N.email?"border-red-300":""),placeholder:"Enter your email"})]}),N.email&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:N.email.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,s.jsxs)("div",{className:"mt-1 relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(u,{className:"h-5 w-5 text-gray-400"})}),(0,s.jsx)(p.I,{id:"password",type:e?"text":"password",autoComplete:"current-password",...j("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),className:"pl-10 pr-10 ".concat(N.password?"border-red-300":""),placeholder:"Enter your password"}),(0,s.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>t(!e),children:e?(0,s.jsx)(m.Z,{className:"h-5 w-5 text-gray-400"}):(0,s.jsx)(h.Z,{className:"h-5 w-5 text-gray-400"})})]}),N.password&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:N.password.message})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),(0,s.jsx)("div",{className:"text-sm",children:(0,s.jsx)(i(),{href:"/forgot-password",className:"font-medium text-blue-600 hover:text-blue-500",children:"Forgot your password?"})})]}),(0,s.jsx)("div",{children:(0,s.jsx)(v.z,{type:"submit",disabled:k||b,className:"w-full",children:k||b?(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):"Sign in"})}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,s.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)(f.kZ,{onSuccess:handleGoogleSuccess,onError:()=>handleGoogleError("Google sign-in failed"),useOneTap:!0,theme:"outline",size:"large",text:"signin_with",shape:"rectangular",width:"100%"})})]}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,s.jsx)(i(),{href:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"Create one here"})]})})]})]})})}},3089:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var s=r(57437),o=r(2265),n=r(67256),i=r(96061),a=r(60345);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=o.forwardRef((e,t)=>{let{className:r,variant:o,size:i,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,s.jsx)(u,{className:(0,a.cn)(l({variant:o,size:i,className:r})),ref:t,...c})});d.displayName="Button"},86582:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var s=r(57437),o=r(2265),n=r(60345);let i=o.forwardRef((e,t)=>{let{className:r,type:o,...i}=e;return(0,s.jsx)("input",{type:o,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},34490:function(e,t,r){"use strict";r.d(t,{a:function(){return useAuth}}),r(57437);var s=r(2265);r(24033),r(5925);var o=r(54829);let n=o.Z.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t?(console.log("Axios request - adding token to request"),e.headers.Authorization="Bearer ".concat(t)):console.log("Axios request - no token found")}return e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>{var t,r,s,o,n,i,a,l,d;if((null===(t=e.response)||void 0===t?void 0:t.status)===401){console.log("Axios interceptor - 401 error:",null===(s=e.response)||void 0===s?void 0:null===(r=s.data)||void 0===r?void 0:r.message);let t=(null===(i=e.response)||void 0===i?void 0:null===(n=i.data)||void 0===n?void 0:null===(o=n.message)||void 0===o?void 0:o.toLowerCase())||"",c=(null===(d=e.response)||void 0===d?void 0:null===(l=d.data)||void 0===l?void 0:null===(a=l.error)||void 0===a?void 0:a.toLowerCase())||"",u=t.includes("invalid token")||t.includes("token expired")||t.includes("unauthorized")||t.includes("not authorized")||c.includes("invalid token")||c.includes("token expired")||c.includes("unauthorized")||c.includes("not authorized");u?(console.log("Axios interceptor - logging out due to auth error"),localStorage.removeItem("token"),"/login"!==window.location.pathname&&(window.location.href="/login")):console.log("Axios interceptor - 401 error but not auth related, not logging out")}return Promise.reject(e)});let i=(0,s.createContext)(void 0),useAuth=()=>{let e=(0,s.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},60345:function(e,t,r){"use strict";r.d(t,{cn:function(){return cn}});var s=r(57042),o=r(23986);function cn(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.m)((0,s.W)(t))}}},function(e){e.O(0,[5881,4829,8511,384,2971,2472,1744],function(){return e(e.s=93547)}),_N_E=e.O()}]);