(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[307],{62410:function(e,t,n){Promise.resolve().then(n.bind(n,47387))},47387:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return IntegrationCallbackPage},dynamic:function(){return m}});var r=n(57437),a=n(2265),s=n(24033),c=n(10609),i=n(3089),o=n(66794),l=n(11666),u=n(21012),d=n(55555);let m="force-dynamic";function IntegrationCallbackPage(){let e=(0,s.useRouter)(),t=(0,s.useSearchParams)(),n=(0,s.useParams)(),[m,g]=(0,a.useState)("loading"),[x,h]=(0,a.useState)(""),[f,p]=(0,a.useState)(""),y=n.integration;return(0,a.useEffect)(()=>{let handleCallback=async()=>{try{let e=t.get("code");t.get("state");let n=t.get("error"),r=d.Z.getAvailableIntegrations(),a=r.find(e=>e._id===y);if(a&&p(a.name),n){g("error"),h("Authorization was denied or an error occurred.");return}if(!e){g("error"),h("No authorization code received.");return}let s=await d.Z.connectIntegration(y,e);s.success?(g("success"),h("".concat(f||"Integration"," connected successfully!"))):(g("error"),h(s.error||"Failed to connect ".concat(f||"integration",".")))}catch(e){console.error("Error handling integration callback:",e),g("error"),h("An unexpected error occurred.")}};y&&handleCallback()},[y,t,f]),(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)(c.Zb,{className:"w-full max-w-md",children:[(0,r.jsx)(c.Ol,{className:"text-center",children:(0,r.jsxs)(c.ll,{className:"flex items-center justify-center space-x-2",children:["loading"===m&&(0,r.jsx)(o.Z,{className:"h-6 w-6 animate-spin"}),"success"===m&&(0,r.jsx)(l.Z,{className:"h-6 w-6 text-green-600"}),"error"===m&&(0,r.jsx)(u.Z,{className:"h-6 w-6 text-red-600"}),(0,r.jsx)("span",{className:"text-2xl mr-2",children:(e=>{let t=d.Z.getAvailableIntegrations(),n=t.find(t=>t._id===e);return(null==n?void 0:n.icon)||"\uD83D\uDD17"})(y)}),(0,r.jsx)("span",{children:f||"Integration"})]})}),(0,r.jsxs)(c.aY,{className:"text-center space-y-4",children:["loading"===m&&(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"text-muted-foreground",children:["Connecting your ",f||"integration","..."]})}),"success"===m&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-green-600 font-medium",children:x}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:["You can now sync your data and manage your ",f||"integration"," from the integrations page."]})]}),"error"===m&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-red-600 font-medium",children:x}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Please try connecting again from the integrations page."})]}),(0,r.jsx)(i.z,{onClick:()=>{e.push("/integrations")},className:"w-full",children:"Continue to Integrations"})]})]})})}},24033:function(e,t,n){e.exports=n(50094)},11666:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(17865);let a=(0,r.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]])},66794:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(17865);let a=(0,r.Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},21012:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(17865);let a=(0,r.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])}},function(e){e.O(0,[5881,4829,1324,2971,2472,1744],function(){return e(e.s=62410)}),_N_E=e.O()}]);