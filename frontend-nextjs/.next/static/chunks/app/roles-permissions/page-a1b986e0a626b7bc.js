(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8808],{90423:function(e,s,t){Promise.resolve().then(t.bind(t,35654))},35654:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return RolesPermissions_RolesPermissions}});var a=t(57437),r=t(2265),n=t(79915),i=t(47730),o=t(6773),l=t(4349),c=t(68247),d=t(66794),u=t(73835),m=t(61023),p=t(77013),x=t(22178),f=t(68492),h=t(10609),g=t(3089),j=t(40150),v=t(86582),y=t(45271),N=t(31472),b=t(6429),w=t(84606),R=t(66062),C=t(23408),A=t(60345);let _=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(R.fC,{ref:s,className:(0,A.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...r,children:(0,a.jsx)(R.z$,{className:(0,A.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(C.Z,{className:"h-4 w-4"})})})});_.displayName=R.fC.displayName;var k=t(47461),S=t(54829);let D=S.Z.create({baseURL:"".concat("http://localhost:5000/api","/roles"),headers:{"Content-Type":"application/json"}});D.interceptors.request.use(e=>{{let s=localStorage.getItem("token");s&&(e.headers.Authorization="Bearer ".concat(s))}return e},e=>Promise.reject(e));var Z={getRoles:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let s=await D.get("/",{params:e});return s.data}catch(e){return console.error("Error fetching roles:",e),{success:!1,data:[]}}},getRoleById:async e=>{try{let s=await D.get("/".concat(e));return s.data}catch(e){return console.error("Error fetching role:",e),{success:!1,data:{}}}},createRole:async e=>{try{let s=await D.post("/",e);return s.data}catch(e){return console.error("Error creating role:",e),{success:!1,data:{}}}},updateRole:async(e,s)=>{try{let t=await D.put("/".concat(e),s);return t.data}catch(e){return console.error("Error updating role:",e),{success:!1,data:{}}}},deleteRole:async e=>{try{let s=await D.delete("/".concat(e));return s.data}catch(e){return console.error("Error deleting role:",e),{success:!1,message:"Failed to delete role"}}},getDefaultRoles:async()=>{try{let e=await D.get("/default");return e.data}catch(e){return console.error("Error fetching default roles:",e),{success:!1,data:[]}}},initializeDefaultRoles:async()=>{try{let e=await D.post("/initialize");return e.data}catch(e){return console.error("Error initializing default roles:",e),{success:!1,message:"Failed to initialize default roles"}}},getAvailableModules:()=>["users","teams","employees","attendance","leaves","payroll","projects","tasks","sprints","finance","analytics","content","integrations"],getAvailableActions:()=>["create","read","update","delete","approve","export"],getModuleDescriptions:()=>({users:"User Management - Create, view, edit, and delete user accounts",teams:"Team Management - Manage team structures and assignments",employees:"Employee Management - HR employee data and profiles",attendance:"Attendance Tracking - Daily check-ins and time tracking",leaves:"Leave Management - Request and approve time off",payroll:"Payroll Management - Salary and compensation data",projects:"Project Management - Create and manage projects",tasks:"Task Management - Assign and track individual tasks",sprints:"Sprint Management - Agile development sprints",finance:"Finance Management - Budget, expenses, and revenue",analytics:"Analytics & Reporting - Data insights and reports",content:"Content Management - YouTube and course content",integrations:"Integrations - Third-party service connections"}),getActionDescriptions:()=>({create:"Can create new records",read:"Can view existing records",update:"Can modify existing records",delete:"Can remove records",approve:"Can approve requests and changes",export:"Can export data to files"})};let E=S.Z.create({baseURL:"".concat("http://localhost:5000/api","/audit"),headers:{"Content-Type":"application/json"}});E.interceptors.request.use(e=>{{let s=localStorage.getItem("token");s&&(e.headers.Authorization="Bearer ".concat(s))}return e},e=>Promise.reject(e));var z={getAuditLogs:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let s=await E.get("/",{params:e});return s.data}catch(e){return console.error("Error fetching audit logs:",e),{success:!1,data:[]}}},getAuditLogById:async e=>{try{let s=await E.get("/".concat(e));return s.data}catch(e){return console.error("Error fetching audit log:",e),{success:!1,data:{}}}},getAuditLogsByUser:async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let t=await E.get("/user/".concat(e),{params:s});return t.data}catch(e){return console.error("Error fetching user audit logs:",e),{success:!1,data:[]}}},getAuditStats:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let s=await E.get("/stats",{params:e});return s.data}catch(e){return console.error("Error fetching audit stats:",e),{success:!1,data:{totalLogs:0,successfulActions:0,failedActions:0,topActions:[],topResources:[],recentActivity:[]}}}},exportAuditLogs:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let s=await E.get("/export",{params:e,responseType:"blob"});return s.data}catch(e){throw console.error("Error exporting audit logs:",e),e}},getAvailableActions:()=>["login","logout","login_failed","permission_granted","permission_revoked","role_assigned","role_removed","user_created","user_updated","user_deleted","user_deactivated","role_created","role_updated","role_deleted","access_denied","unauthorized_access_attempt","data_exported","data_imported","password_changed","profile_updated"],getAvailableResources:()=>["user","role","permission","module","system"],getActionDescriptions:()=>({login:"User successfully logged in",logout:"User logged out",login_failed:"Failed login attempt",permission_granted:"Permission was granted to user",permission_revoked:"Permission was revoked from user",role_assigned:"Role was assigned to user",role_removed:"Role was removed from user",user_created:"New user account was created",user_updated:"User account was updated",user_deleted:"User account was deleted",user_deactivated:"User account was deactivated",role_created:"New role was created",role_updated:"Role was updated",role_deleted:"Role was deleted",access_denied:"Access was denied to resource",unauthorized_access_attempt:"Unauthorized access attempt",data_exported:"Data was exported",data_imported:"Data was imported",password_changed:"Password was changed",profile_updated:"Profile was updated"})},RolesPermissions_RolesPermissions=()=>{let[e,s]=(0,r.useState)("roles"),[t,R]=(0,r.useState)([]),[C,A]=(0,r.useState)([]),[S,D]=(0,r.useState)({totalLogs:0,successfulActions:0,failedActions:0,topActions:[],topResources:[],recentActivity:[]}),[E,L]=(0,r.useState)(!1),[T,U]=(0,r.useState)(""),[F,M]=(0,r.useState)(null),[P,V]=(0,r.useState)(!1),[B,O]=(0,r.useState)(!1),[Y,I]=(0,r.useState)(!1),[q,H]=(0,r.useState)({action:"",resource:"",success:"",startDate:"",endDate:""}),[$,K]=(0,r.useState)({name:"",description:"",permissions:{},isDefault:!1}),Q=Z.getAvailableModules(),W=Z.getAvailableActions(),G=Z.getModuleDescriptions();Z.getActionDescriptions(),(0,r.useEffect)(()=>{loadRoles(),loadAuditLogs(),loadAuditStats()},[]);let loadRoles=async()=>{try{L(!0);let e=await Z.getRoles({search:T});e.success?R(e.data):R(getSampleRoles())}catch(e){console.error("Error loading roles:",e),R(getSampleRoles())}finally{L(!1)}},loadAuditLogs=async()=>{try{L(!0);let e=await z.getAuditLogs(q);e.success?A(e.data):A(getSampleAuditLogs())}catch(e){console.error("Error loading audit logs:",e),A(getSampleAuditLogs())}finally{L(!1)}},loadAuditStats=async()=>{try{let e=await z.getAuditStats();e.success?D(e.data):D(getSampleAuditStats())}catch(e){console.error("Error loading audit stats:",e),D(getSampleAuditStats())}},handleCreateRole=async()=>{try{L(!0);let e=Object.entries($.permissions).filter(e=>{let[s,t]=e;return t.length>0}).map(e=>{let[s,t]=e;return{module:s,actions:Array.from(t)}}),s={name:$.name,description:$.description,permissions:e,isDefault:$.isDefault},t=await Z.createRole(s);t.success?(V(!1),resetRoleForm(),loadRoles()):console.error("Failed to create role")}catch(e){console.error("Error creating role:",e)}finally{L(!1)}},handleUpdateRole=async()=>{if(null==F?void 0:F._id)try{L(!0);let e=Object.entries($.permissions).filter(e=>{let[s,t]=e;return t.length>0}).map(e=>{let[s,t]=e;return{module:s,actions:Array.from(t)}}),s={name:$.name,description:$.description,permissions:e,isDefault:$.isDefault},t=await Z.updateRole(F._id,s);t.success?(O(!1),resetRoleForm(),loadRoles()):console.error("Failed to update role")}catch(e){console.error("Error updating role:",e)}finally{L(!1)}},handleDeleteRole=async e=>{if(window.confirm("Are you sure you want to delete this role? This action cannot be undone."))try{L(!0);let s=await Z.deleteRole(e);s.success?loadRoles():console.error("Failed to delete role")}catch(e){console.error("Error deleting role:",e)}finally{L(!1)}},handleEditRole=e=>{M(e),K({name:e.name,description:e.description,permissions:e.permissions.reduce((e,s)=>(e[s.module]=s.actions,e),{}),isDefault:e.isDefault||!1}),O(!0)},handleViewRole=e=>{M(e),I(!0)},resetRoleForm=()=>{K({name:"",description:"",permissions:{},isDefault:!1}),M(null)},handlePermissionChange=(e,s,t)=>{K(a=>({...a,permissions:{...a.permissions,[e]:t?[...a.permissions[e]||[],s]:(a.permissions[e]||[]).filter(e=>e!==s)}}))},handleExportAuditLogs=async()=>{try{let e=await z.exportAuditLogs(q),s=window.URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="audit-logs.csv",document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(s),document.body.removeChild(t)}catch(e){console.error("Error exporting audit logs:",e)}},J=t.filter(e=>e.name.toLowerCase().includes(T.toLowerCase())||e.description.toLowerCase().includes(T.toLowerCase())),getSampleRoles=()=>[{_id:"1",name:"Admin",description:"Full system access with all permissions",permissions:[{module:"users",actions:["create","read","update","delete","approve","export"]},{module:"teams",actions:["create","read","update","delete","approve","export"]},{module:"projects",actions:["create","read","update","delete","approve","export"]}],isDefault:!1,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{_id:"2",name:"Manager",description:"Team and project management with limited admin access",permissions:[{module:"users",actions:["read","update"]},{module:"teams",actions:["create","read","update"]},{module:"projects",actions:["create","read","update","approve"]}],isDefault:!1,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{_id:"3",name:"Employee",description:"Basic user access with limited permissions",permissions:[{module:"users",actions:["read"]},{module:"teams",actions:["read"]},{module:"projects",actions:["read","update"]}],isDefault:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"}],getSampleAuditLogs=()=>[{_id:"1",userId:"user1",action:"login",resource:"user",details:"User logged in successfully",ipAddress:"192.168.1.1",userAgent:"Mozilla/5.0...",success:!0,timestamp:"2024-01-15T10:30:00Z"},{_id:"2",userId:"user2",action:"role_created",resource:"role",details:'New role "Editor" created',ipAddress:"192.168.1.2",userAgent:"Mozilla/5.0...",success:!0,timestamp:"2024-01-15T09:15:00Z"}],getSampleAuditStats=()=>({totalLogs:1250,successfulActions:1180,failedActions:70,topActions:[{action:"login",count:450},{action:"read",count:320},{action:"update",count:180}],topResources:[{resource:"user",count:600},{resource:"project",count:400},{resource:"team",count:250}],recentActivity:getSampleAuditLogs()});return(0,a.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Roles & Permissions"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage user roles, permissions, and view audit logs"})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsxs)(g.z,{variant:"outline",onClick:()=>{loadRoles(),loadAuditLogs(),loadAuditStats()},disabled:E,children:[(0,a.jsx)(n.Z,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),(0,a.jsxs)(k.mQ,{value:e,onValueChange:s,children:[(0,a.jsxs)(k.dr,{className:"grid w-full grid-cols-3",children:[(0,a.jsxs)(k.SP,{value:"roles",className:"flex items-center gap-2",children:[(0,a.jsx)(i.Z,{className:"h-4 w-4"}),"Roles"]}),(0,a.jsxs)(k.SP,{value:"permissions",className:"flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),"Permissions Matrix"]}),(0,a.jsxs)(k.SP,{value:"audit",className:"flex items-center gap-2",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4"}),"Audit Logs"]})]}),(0,a.jsx)(k.nU,{value:"roles",className:"space-y-6",children:(0,a.jsxs)(h.Zb,{children:[(0,a.jsx)(h.Ol,{children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.ll,{children:"Roles Management"}),(0,a.jsx)(h.SZ,{children:"Create, edit, and manage user roles and their permissions"})]}),(0,a.jsxs)(N.Vq,{open:P,onOpenChange:V,children:[(0,a.jsxs)(g.z,{onClick:()=>V(!0),children:[(0,a.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Create Role"]}),(0,a.jsxs)(N.cZ,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)(N.fK,{children:[(0,a.jsx)(N.$N,{children:"Create New Role"}),(0,a.jsx)(N.Be,{children:"Define a new role with specific permissions"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(b._,{htmlFor:"name",children:"Role Name"}),(0,a.jsx)(v.I,{id:"name",value:$.name,onChange:e=>K(s=>({...s,name:e.target.value})),placeholder:"Enter role name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b._,{htmlFor:"description",children:"Description"}),(0,a.jsx)(w.g,{id:"description",value:$.description,onChange:e=>K(s=>({...s,description:e.target.value})),placeholder:"Enter role description"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b._,{children:"Permissions"}),(0,a.jsx)("div",{className:"border rounded-lg p-4 space-y-4",children:Q.map(e=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"font-medium text-sm",children:[e.charAt(0).toUpperCase()+e.slice(1),(0,a.jsx)("span",{className:"text-muted-foreground ml-2 text-xs",children:G[e]})]}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:W.map(s=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(_,{id:"".concat(e,"-").concat(s),checked:($.permissions[e]||[]).includes(s),onCheckedChange:t=>handlePermissionChange(e,s,t)}),(0,a.jsx)(b._,{htmlFor:"".concat(e,"-").concat(s),className:"text-sm cursor-pointer",children:s.charAt(0).toUpperCase()+s.slice(1)})]},s))})]},e))})]})]}),(0,a.jsxs)(N.cN,{children:[(0,a.jsx)(g.z,{variant:"outline",onClick:()=>V(!1),children:"Cancel"}),(0,a.jsx)(g.z,{onClick:handleCreateRole,disabled:E,children:E?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Role"})]})]})]})]})}),(0,a.jsxs)(h.aY,{children:[(0,a.jsx)("div",{className:"flex items-center space-x-2 mb-4",children:(0,a.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,a.jsx)(u.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)(v.I,{placeholder:"Search roles...",value:T,onChange:e=>U(e.target.value),className:"pl-10"})]})}),E?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(d.Z,{className:"h-8 w-8 animate-spin mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading roles..."})]}):(0,a.jsxs)(y.iA,{children:[(0,a.jsx)(y.xD,{children:(0,a.jsxs)(y.SC,{children:[(0,a.jsx)(y.ss,{children:"Role Name"}),(0,a.jsx)(y.ss,{children:"Description"}),(0,a.jsx)(y.ss,{children:"Permissions"}),(0,a.jsx)(y.ss,{children:"Default"}),(0,a.jsx)(y.ss,{children:"Actions"})]})}),(0,a.jsx)(y.RM,{children:J.map(e=>(0,a.jsxs)(y.SC,{children:[(0,a.jsx)(y.pj,{className:"font-medium",children:e.name}),(0,a.jsx)(y.pj,{children:e.description}),(0,a.jsx)(y.pj,{children:(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.permissions.map((e,s)=>(0,a.jsxs)(j.C,{variant:"secondary",className:"text-xs",children:[e.module,": ",e.actions.length," actions"]},s))})}),(0,a.jsx)(y.pj,{children:e.isDefault?(0,a.jsx)(j.C,{variant:"default",children:"Default"}):(0,a.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,a.jsx)(y.pj,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(g.z,{variant:"ghost",size:"sm",onClick:()=>handleViewRole(e),children:(0,a.jsx)(m.Z,{className:"h-4 w-4"})}),(0,a.jsx)(g.z,{variant:"ghost",size:"sm",onClick:()=>handleEditRole(e),children:(0,a.jsx)(p.Z,{className:"h-4 w-4"})}),(0,a.jsx)(g.z,{variant:"ghost",size:"sm",onClick:()=>handleDeleteRole(e._id),children:(0,a.jsx)(x.Z,{className:"h-4 w-4"})})]})})]},e._id))})]})]})]})}),(0,a.jsx)(k.nU,{value:"permissions",className:"space-y-6",children:(0,a.jsxs)(h.Zb,{children:[(0,a.jsxs)(h.Ol,{children:[(0,a.jsx)(h.ll,{children:"Permissions Matrix"}),(0,a.jsx)(h.SZ,{children:"Overview of all roles and their permissions across modules"})]}),(0,a.jsx)(h.aY,{children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(y.iA,{children:[(0,a.jsx)(y.xD,{children:(0,a.jsxs)(y.SC,{children:[(0,a.jsx)(y.ss,{children:"Role"}),Q.map(e=>(0,a.jsx)(y.ss,{className:"text-center",children:e.charAt(0).toUpperCase()+e.slice(1)},e))]})}),(0,a.jsx)(y.RM,{children:t.map(e=>(0,a.jsxs)(y.SC,{children:[(0,a.jsx)(y.pj,{className:"font-medium",children:e.name}),Q.map(s=>{let t=e.permissions.find(e=>e.module===s),r=t?t.actions.length:0;return(0,a.jsx)(y.pj,{className:"text-center",children:r>0?(0,a.jsxs)(j.C,{variant:"secondary",children:[r," actions"]}):(0,a.jsx)("span",{className:"text-muted-foreground",children:"-"})},s)})]},e._id))})]})})})]})}),(0,a.jsx)(k.nU,{value:"audit",className:"space-y-6",children:(0,a.jsxs)(h.Zb,{children:[(0,a.jsx)(h.Ol,{children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.ll,{children:"Audit Logs"}),(0,a.jsx)(h.SZ,{children:"Track system activities and user actions"})]}),(0,a.jsxs)(g.z,{variant:"outline",onClick:handleExportAuditLogs,children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Export"]})]})}),(0,a.jsxs)(h.aY,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsx)(h.Zb,{children:(0,a.jsxs)(h.aY,{className:"p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:S.totalLogs}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Logs"})]})}),(0,a.jsx)(h.Zb,{children:(0,a.jsxs)(h.aY,{className:"p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:S.successfulActions}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Successful"})]})}),(0,a.jsx)(h.Zb,{children:(0,a.jsxs)(h.aY,{className:"p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:S.failedActions}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Failed"})]})}),(0,a.jsx)(h.Zb,{children:(0,a.jsxs)(h.aY,{className:"p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:S.recentActivity.length}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Recent Activity"})]})})]}),(0,a.jsxs)(y.iA,{children:[(0,a.jsx)(y.xD,{children:(0,a.jsxs)(y.SC,{children:[(0,a.jsx)(y.ss,{children:"Timestamp"}),(0,a.jsx)(y.ss,{children:"Action"}),(0,a.jsx)(y.ss,{children:"Resource"}),(0,a.jsx)(y.ss,{children:"Details"}),(0,a.jsx)(y.ss,{children:"Status"})]})}),(0,a.jsx)(y.RM,{children:C.map(e=>(0,a.jsxs)(y.SC,{children:[(0,a.jsx)(y.pj,{children:new Date(e.timestamp).toLocaleString()}),(0,a.jsx)(y.pj,{children:(0,a.jsx)(j.C,{variant:e.success?"default":"destructive",children:e.action})}),(0,a.jsx)(y.pj,{children:e.resource}),(0,a.jsx)(y.pj,{children:e.details}),(0,a.jsx)(y.pj,{children:(0,a.jsx)(j.C,{variant:e.success?"default":"destructive",children:e.success?"Success":"Failed"})})]},e._id))})]})]})]})})]}),(0,a.jsx)(N.Vq,{open:Y,onOpenChange:I,children:(0,a.jsxs)(N.cZ,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)(N.fK,{children:[(0,a.jsxs)(N.$N,{children:["Role Details: ",null==F?void 0:F.name]}),(0,a.jsx)(N.Be,{children:null==F?void 0:F.description})]}),F&&(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(b._,{children:"Permissions"}),(0,a.jsx)("div",{className:"border rounded-lg p-4 space-y-4",children:Q.map(e=>{let s=F.permissions.find(s=>s.module===e);return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"font-medium text-sm",children:[e.charAt(0).toUpperCase()+e.slice(1),(0,a.jsx)("span",{className:"text-muted-foreground ml-2 text-xs",children:G[e]})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:s?s.actions.map(e=>(0,a.jsx)(j.C,{variant:"secondary",className:"text-xs",children:e.charAt(0).toUpperCase()+e.slice(1)},e)):(0,a.jsx)("span",{className:"text-muted-foreground text-sm",children:"No permissions"})})]},e)})})]})})]})}),(0,a.jsx)(N.Vq,{open:B,onOpenChange:O,children:(0,a.jsxs)(N.cZ,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)(N.fK,{children:[(0,a.jsxs)(N.$N,{children:["Edit Role: ",null==F?void 0:F.name]}),(0,a.jsx)(N.Be,{children:"Modify role permissions and settings"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(b._,{htmlFor:"edit-name",children:"Role Name"}),(0,a.jsx)(v.I,{id:"edit-name",value:$.name,onChange:e=>K(s=>({...s,name:e.target.value})),placeholder:"Enter role name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b._,{htmlFor:"edit-description",children:"Description"}),(0,a.jsx)(w.g,{id:"edit-description",value:$.description,onChange:e=>K(s=>({...s,description:e.target.value})),placeholder:"Enter role description"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(b._,{children:"Permissions"}),(0,a.jsx)("div",{className:"border rounded-lg p-4 space-y-4",children:Q.map(e=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"font-medium text-sm",children:[e.charAt(0).toUpperCase()+e.slice(1),(0,a.jsx)("span",{className:"text-muted-foreground ml-2 text-xs",children:G[e]})]}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:W.map(s=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(_,{id:"edit-".concat(e,"-").concat(s),checked:($.permissions[e]||[]).includes(s),onCheckedChange:t=>handlePermissionChange(e,s,t)}),(0,a.jsx)(b._,{htmlFor:"edit-".concat(e,"-").concat(s),className:"text-sm cursor-pointer",children:s.charAt(0).toUpperCase()+s.slice(1)})]},s))})]},e))})]})]}),(0,a.jsxs)(N.cN,{children:[(0,a.jsx)(g.z,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),(0,a.jsx)(g.z,{onClick:handleUpdateRole,disabled:E,children:E?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Role"})]})]})})]})}},40150:function(e,s,t){"use strict";t.d(s,{C:function(){return Badge}});var a=t(57437);t(2265);var r=t(96061),n=t(60345);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Badge(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:t}),s),...r})}},3089:function(e,s,t){"use strict";t.d(s,{z:function(){return c}});var a=t(57437),r=t(2265),n=t(67256),i=t(96061),o=t(60345);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,s)=>{let{className:t,variant:r,size:i,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(l({variant:r,size:i,className:t})),ref:s,...d})});c.displayName="Button"},10609:function(e,s,t){"use strict";t.d(s,{Ol:function(){return o},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return l}});var a=t(57437),r=t(2265),n=t(60345);let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});i.displayName="Card";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...r})});o.displayName="CardHeader";let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});l.displayName="CardTitle";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})});c.displayName="CardDescription";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...r})});d.displayName="CardContent";let u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...r})});u.displayName="CardFooter"},31472:function(e,s,t){"use strict";t.d(s,{$N:function(){return m},Be:function(){return p},Vq:function(){return l},cN:function(){return DialogFooter},cZ:function(){return u},fK:function(){return DialogHeader}});var a=t(57437),r=t(2265),n=t(28712),i=t(4862),o=t(60345);let l=n.fC;n.xz;let c=n.h_;n.x8;let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.aV,{ref:s,className:(0,o.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});d.displayName=n.aV.displayName;let u=r.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(d,{}),(0,a.jsxs)(n.VY,{ref:s,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l,children:[r,(0,a.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(i.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=n.VY.displayName;let DialogHeader=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};DialogHeader.displayName="DialogHeader";let DialogFooter=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};DialogFooter.displayName="DialogFooter";let m=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.Dx,{ref:s,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});m.displayName=n.Dx.displayName;let p=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.dk,{ref:s,className:(0,o.cn)("text-sm text-muted-foreground",t),...r})});p.displayName=n.dk.displayName},86582:function(e,s,t){"use strict";t.d(s,{I:function(){return i}});var a=t(57437),r=t(2265),n=t(60345);let i=r.forwardRef((e,s)=>{let{className:t,type:r,...i}=e;return(0,a.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...i})});i.displayName="Input"},6429:function(e,s,t){"use strict";t.d(s,{_:function(){return c}});var a=t(57437),r=t(2265),n=t(36743),i=t(96061),o=t(60345);let l=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.f,{ref:s,className:(0,o.cn)(l(),t),...r})});c.displayName=n.f.displayName},45271:function(e,s,t){"use strict";t.d(s,{RM:function(){return l},SC:function(){return d},iA:function(){return i},pj:function(){return m},ss:function(){return u},xD:function(){return o}});var a=t(57437),r=t(2265),n=t(60345);let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:(0,n.cn)("w-full caption-bottom text-sm",t),...r})})});i.displayName="Table";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("thead",{ref:s,className:(0,n.cn)("[&_tr]:border-b",t),...r})});o.displayName="TableHeader";let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("tbody",{ref:s,className:(0,n.cn)("[&_tr:last-child]:border-0",t),...r})});l.displayName="TableBody";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("tfoot",{ref:s,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r})});c.displayName="TableFooter";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("tr",{ref:s,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r})});d.displayName="TableRow";let u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("th",{ref:s,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...r})});u.displayName="TableHead";let m=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("td",{ref:s,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...r})});m.displayName="TableCell";let p=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("caption",{ref:s,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",t),...r})});p.displayName="TableCaption"},47461:function(e,s,t){"use strict";t.d(s,{SP:function(){return c},dr:function(){return l},mQ:function(){return o},nU:function(){return d}});var a=t(57437),r=t(2265),n=t(17094),i=t(60345);let o=n.fC,l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.aV,{ref:s,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...r})});l.displayName=n.aV.displayName;let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.xz,{ref:s,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...r})});c.displayName=n.xz.displayName;let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.VY,{ref:s,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r})});d.displayName=n.VY.displayName},84606:function(e,s,t){"use strict";t.d(s,{g:function(){return i}});var a=t(57437),r=t(2265),n=t(60345);let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...r})});i.displayName="Textarea"},60345:function(e,s,t){"use strict";t.d(s,{cn:function(){return cn}});var a=t(57042),r=t(23986);function cn(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.m)((0,a.W)(s))}}},function(e){e.O(0,[5881,4829,7588,1515,2681,2971,2472,1744],function(){return e(e.s=90423)}),_N_E=e.O()}]);