(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7289],{25547:function(e,s,t){Promise.resolve().then(t.bind(t,44818))},44818:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return Tasks_KanbanBoard}});var a=t(57437),r=t(2265),i=t(17865);let n=(0,i.Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);var l=t(97022),d=t(61023),c=t(11666),o=t(66794),u=t(68492),m=t(68247),h=t(56788),x=t(94115),p=t(95779),g=t(73835);let v=(0,i.Z)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);var j=t(99839),y=t(79799),f=t(38523);let k=(0,i.Z)("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),w=(0,i.Z)("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);var N=t(77013),b=t(22178),T=t(59809),C=t(74323),D=t(10609),S=t(3089),Z=t(40150),A=t(86582),_=t(41735),P=t(84606),E=t(31472),B=t(6429),V=t(20985),H=t(34490),z=t(54829);let F=z.Z.create({baseURL:"".concat("http://localhost:5000/api","/tasks"),headers:{"Content-Type":"application/json"}});F.interceptors.request.use(e=>{{let s=localStorage.getItem("token");s&&(e.headers.Authorization="Bearer ".concat(s))}return e},e=>Promise.reject(e));let I={async getTasks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let s=new URLSearchParams;Object.entries(e).forEach(e=>{let[t,a]=e;a&&s.append(t,a.toString())});let t=await F.get("?".concat(s.toString()));if(t.data&&t.data.success)return{success:!0,data:Array.isArray(t.data.data)?t.data.data:[]};if(Array.isArray(t.data))return{success:!0,data:t.data};return{success:!0,data:[]}}catch(e){var s,t;return console.error("Error fetching tasks:",e),{success:!1,error:(null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to fetch tasks"}}},async getTaskById(e){try{let s=await F.get("/".concat(e));return{success:!0,data:s.data}}catch(e){var s,t;return console.error("Error fetching task:",e),{success:!1,error:(null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to fetch task"}}},async createTask(e){try{let s=await F.post("/",e);return{success:!0,data:s.data}}catch(e){var s,t;return console.error("Error creating task:",e),{success:!1,error:(null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to create task"}}},async updateTask(e,s){try{let t=await F.put("/".concat(e),s);return{success:!0,data:t.data}}catch(e){var t,a;return console.error("Error updating task:",e),{success:!1,error:(null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to update task"}}},async deleteTask(e){try{let s=await F.delete("/".concat(e));return{success:!0,data:s.data}}catch(e){var s,t;return console.error("Error deleting task:",e),{success:!1,error:(null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to delete task"}}},async updateTaskStatus(e,s){try{let t=await F.patch("/".concat(e,"/status"),{status:s});return{success:!0,data:t.data}}catch(e){var t,a;return console.error("Error updating task status:",e),{success:!1,error:(null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to update task status"}}},async assignTask(e,s){try{let t=await F.patch("/".concat(e,"/assign"),{userId:s});return{success:!0,data:t.data}}catch(e){var t,a;return console.error("Error assigning task:",e),{success:!1,error:(null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to assign task"}}},async addComment(e,s){try{let t=await F.post("/".concat(e,"/comments"),{content:s});return{success:!0,data:t.data}}catch(e){var t,a;return console.error("Error adding comment:",e),{success:!1,error:(null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to add comment"}}},async addSubtask(e,s){try{let t=await F.post("/".concat(e,"/subtasks"),{title:s});return{success:!0,data:t.data}}catch(e){var t,a;return console.error("Error adding subtask:",e),{success:!1,error:(null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to add subtask"}}},async completeSubtask(e,s){try{let t=await F.patch("/".concat(e,"/subtasks/").concat(s,"/complete"));return{success:!0,data:t.data}}catch(e){var t,a;return console.error("Error completing subtask:",e),{success:!1,error:(null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to complete subtask"}}},async getTaskStats(){try{let e=await F.get("/stats");return{success:!0,data:e.data}}catch(t){var e,s;return console.error("Error fetching task stats:",t),{success:!1,error:(null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Failed to fetch task stats"}}},async getOverdueTasks(){try{let e=await F.get("/overdue");return{success:!0,data:e.data}}catch(t){var e,s;return console.error("Error fetching overdue tasks:",t),{success:!1,error:(null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Failed to fetch overdue tasks"}}},async getMyTasks(e){try{let s=await F.get("/my-tasks".concat(e?"?status=".concat(e):""));return{success:!0,data:s.data}}catch(e){var s,t;return console.error("Error fetching my tasks:",e),{success:!1,error:(null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to fetch my tasks"}}},getAvailableTypes:()=>["feature","bug","improvement","content","design","testing","deployment","other"],getAvailableStatuses:()=>["todo","doing","review","done","cancelled"],getAvailablePriorities:()=>["low","medium","high","urgent"],getSampleTasks:()=>({todo:[{_id:"1",title:"Design new landing page",description:"Create wireframes and mockups for the new landing page",project:"project1",status:"todo",priority:"high",type:"design",assignedTo:"user1",assignedBy:"user1",dueDate:"2024-02-10",estimatedHours:16,actualHours:0,progress:0,comments:[],subtasks:[],isActive:!0,createdAt:"2024-01-15T00:00:00Z",updatedAt:"2024-01-15T00:00:00Z"},{_id:"2",title:"Set up CI/CD pipeline",description:"Configure automated testing and deployment pipeline",project:"project1",status:"todo",priority:"medium",type:"deployment",assignedTo:"user2",assignedBy:"user1",dueDate:"2024-02-12",estimatedHours:24,actualHours:0,progress:0,comments:[],subtasks:[],isActive:!0,createdAt:"2024-01-14T00:00:00Z",updatedAt:"2024-01-14T00:00:00Z"}],doing:[{_id:"3",title:"Implement user authentication",description:"Build JWT-based authentication system",project:"project1",status:"doing",priority:"urgent",type:"feature",assignedTo:"user3",assignedBy:"user1",dueDate:"2024-02-08",estimatedHours:32,actualHours:12,progress:37,comments:[],subtasks:[],isActive:!0,createdAt:"2024-01-10T00:00:00Z",updatedAt:"2024-01-10T00:00:00Z"}],review:[{_id:"5",title:"Database optimization",description:"Optimize database queries and indexes",project:"project1",status:"review",priority:"high",type:"improvement",assignedTo:"user4",assignedBy:"user1",dueDate:"2024-02-09",estimatedHours:20,actualHours:8,progress:40,comments:[],subtasks:[],isActive:!0,createdAt:"2024-01-12T00:00:00Z",updatedAt:"2024-01-12T00:00:00Z"}],done:[{_id:"4",title:"API documentation",description:"Create comprehensive API documentation",project:"project1",status:"done",priority:"medium",type:"content",assignedTo:"user5",assignedBy:"user1",dueDate:"2024-01-31",estimatedHours:8,actualHours:6,progress:100,comments:[],subtasks:[],isActive:!0,createdAt:"2024-01-08T00:00:00Z",updatedAt:"2024-01-08T00:00:00Z"}]}),getSampleTaskStats:()=>({totalTasks:4,completedTasks:1,overdueTasks:0,tasksByStatus:[{status:"todo",count:2},{status:"doing",count:1},{status:"review",count:1},{status:"done",count:1}],tasksByPriority:[{priority:"urgent",count:1},{priority:"high",count:2},{priority:"medium",count:2}],tasksByType:[{type:"design",count:1},{type:"deployment",count:1},{type:"feature",count:1},{type:"improvement",count:1},{type:"content",count:1}]})};var M=t(59748),U=t(16200),Tasks_KanbanBoard=()=>{let{user:e,logActivity:s}=(0,H.a)(),[t,i]=(0,r.useState)({todo:[],doing:[],review:[],done:[]}),[z,F]=(0,r.useState)(!0),[O,Q]=(0,r.useState)(""),[L,$]=(0,r.useState)("all"),[q,K]=(0,r.useState)("all"),[R,Y]=(0,r.useState)("all"),[W,G]=(0,r.useState)("all"),[J,X]=(0,r.useState)([]),[ee,es]=(0,r.useState)([]),[et,ea]=(0,r.useState)(null),[er,ei]=(0,r.useState)(null),[en,el]=(0,r.useState)(!1),[ed,ec]=(0,r.useState)(!1),[eo,eu]=(0,r.useState)(!1),[em,eh]=(0,r.useState)(!1),[ex,ep]=(0,r.useState)(!1),[eg,ev]=(0,r.useState)(!1),[ej,ey]=(0,r.useState)(!1),[ef,ek]=(0,r.useState)(!1),[ew,eN]=(0,r.useState)(new Set),[eb,eT]=(0,r.useState)({title:"",description:"",project:"",priority:"medium",type:"feature",assignedTo:"",dueDate:"",estimatedHours:0,labels:[],tags:[]}),[eC,eD]=(0,r.useState)(""),[eS,eZ]=(0,r.useState)(""),[eA,e_]=(0,r.useState)(""),[eP,eE]=(0,r.useState)({hours:0,minutes:0}),[eB,eV]=(0,r.useState)(!1),[eH,ez]=(0,r.useState)(null),[eF,eI]=(0,r.useState)(null),[eM,eU]=(0,r.useState)(null),[eO,eQ]=(0,r.useState)(!1),[eL,e$]=(0,r.useState)(new Set),eq=[{id:"todo",title:"To Do",color:"bg-gray-100",icon:n},{id:"doing",title:"In Progress",color:"bg-blue-100",icon:l.Z},{id:"review",title:"Review",color:"bg-yellow-100",icon:d.Z},{id:"done",title:"Done",color:"bg-green-100",icon:c.Z}],eK=(0,r.useCallback)(async()=>{F(!0);try{let e=await I.getTasks();if(e.success){let s=e.data,t={todo:s.filter(e=>"todo"===e.status),doing:s.filter(e=>"doing"===e.status),review:s.filter(e=>"review"===e.status),done:s.filter(e=>"done"===e.status)};i(t)}else i(I.getSampleTasks());let s=await M.W.getUsers();s.success&&X(s.data);let t=await U.B.getProjects();t.success&&es(t.data);let a=await I.getTaskStats();a.success?ea(a.data):ea(I.getSampleTaskStats())}catch(e){console.error("Error loading data:",e),i(I.getSampleTasks()),ea(I.getSampleTaskStats())}finally{F(!1)}},[]);(0,r.useEffect)(()=>{eK(),s("Kanban Board Visit","User accessed task management board")},[eK,s]);let handleDragStart=(e,s,t)=>{eI({id:s,type:"task",sourceColumn:t}),eQ(!0),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html","")},handleDragOver=(e,s)=>{e.preventDefault(),eU(s)},handleDragLeave=()=>{eU(null)},handleDrop=async(e,t)=>{if(e.preventDefault(),!eF)return;let{id:a,sourceColumn:r}=eF;if(r===t){eI(null),eU(null),eQ(!1);return}try{let e=await I.updateTaskStatus(a,t);e.success&&(i(e=>{let s={...e};s[r]=s[r].filter(e=>e._id!==a);let i=e[r].find(e=>e._id===a);if(i){let e={...i,status:t};s[t]=[...s[t],e]}return s}),e$(e=>new Set([...Array.from(e),a])),setTimeout(()=>{e$(e=>{let s=new Set(e);return s.delete(a),s})},300),s("Task Status Updated","Task moved from ".concat(r," to ").concat(t)))}catch(e){console.error("Error updating task status:",e)}eI(null),eU(null),eQ(!1)},handleAddTask=e=>{var s;eT({title:"",description:"",project:(null===(s=ee[0])||void 0===s?void 0:s._id)||"",priority:"medium",type:"feature",assignedTo:"",dueDate:"",estimatedHours:0,labels:[],tags:[]}),el(!0)},handleEditTask=e=>{ei(e),eT({title:e.title,description:e.description||"",project:e.project,priority:e.priority,type:e.type,assignedTo:e.assignedTo||"",dueDate:e.dueDate.split("T")[0],estimatedHours:e.estimatedHours||0,labels:e.labels||[],tags:e.tags||[]}),el(!0)},handleDeleteTask=e=>{ei(e),ec(!0)},handleConfirmDelete=async()=>{if(er){try{let e=await I.deleteTask(er._id);e.success&&(i(e=>{let s={...e};return s[er.status]=s[er.status].filter(e=>e._id!==er._id),s}),s("Task Deleted","Deleted task: ".concat(er.title)))}catch(e){console.error("Error deleting task:",e)}ec(!1),ei(null)}},handleSaveTask=async()=>{try{if(er){let e=await I.updateTask(er._id,eb);e.success&&(i(e=>{let s={...e},t=s[er.status].findIndex(e=>e._id===er._id);return -1!==t&&(s[er.status][t]={...er,...eb}),s}),s("Task Updated","Updated task: ".concat(eb.title)))}else{let t=await I.createTask({...eb,status:"todo",assignedBy:(null==e?void 0:e._id)||"",createdBy:(null==e?void 0:e._id)||""});if(t.success){let e=t.data;i(s=>({...s,todo:[...s.todo,e]})),s("Task Created","Created new task: ".concat(eb.title))}}}catch(e){console.error("Error saving task:",e)}el(!1),ei(null)},handleAddComment=async()=>{if(er&&eC.trim())try{let e=await I.addComment(er._id,eC);e.success&&(i(s=>{let t={...s},a=t[er.status].findIndex(e=>e._id===er._id);return -1!==a&&(t[er.status][a]={...t[er.status][a],comments:[...t[er.status][a].comments||[],e.data]}),t}),eD(""),eu(!1),s("Comment Added","Added comment to task: ".concat(er.title)))}catch(e){console.error("Error adding comment:",e)}},handleSaveTimeTracking=async()=>{if(!er)return;let e=60*eP.hours+eP.minutes;if(0!==e)try{let t=await I.updateTask(er._id,{actualHours:(er.actualHours||0)+e/60});t.success&&(i(s=>{let t={...s},a=t[er.status].findIndex(e=>e._id===er._id);return -1!==a&&(t[er.status][a]={...t[er.status][a],actualHours:(t[er.status][a].actualHours||0)+e/60}),t}),eE({hours:0,minutes:0}),eh(!1),s("Time Tracking Updated","Added ".concat(e," minutes to task: ").concat(er.title)))}catch(e){console.error("Error updating time tracking:",e)}},getPriorityColor=e=>{switch(e){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},getTypeIcon=e=>{switch(e){case"design":return"\uD83C\uDFA8";case"development":return"\uD83D\uDCBB";case"documentation":return"\uD83D\uDCDD";case"testing":return"\uD83E\uDDEA";case"bug":return"\uD83D\uDC1B";case"feature":return"✨";case"improvement":case"deployment":return"\uD83D\uDE80";case"content":return"\uD83D\uDCC4";default:return"\uD83D\uDCCB"}},isOverdue=e=>new Date(e)<new Date,getProgressPercentage=e=>{if(e.subtasks&&e.subtasks.length>0){let s=e.subtasks.filter(e=>e.completed).length;return s/e.subtasks.length*100}return e.progress||0},eR=Object.keys(t).reduce((e,s)=>(e[s]=t[s].filter(e=>{let s=""===O||e.title.toLowerCase().includes(O.toLowerCase())||e.description&&e.description.toLowerCase().includes(O.toLowerCase()),t="all"===L||e.priority===L,a="all"===q||e.type===q,r="all"===R||e.project===R,i="all"===W||e.assignedTo===W;return s&&t&&a&&r&&i}),e),{});return z?(0,a.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,a.jsx)(o.Z,{className:"h-8 w-8 animate-spin"}),(0,a.jsx)("span",{className:"ml-2",children:"Loading tasks..."})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Task Management"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage tasks with Kanban board"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(S.z,{variant:"outline",onClick:()=>window.print(),children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,a.jsxs)(S.z,{onClick:()=>handleAddTask("todo"),children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"New Task"]})]})]}),et&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)(D.Zb,{children:(0,a.jsx)(D.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Tasks"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:et.totalTasks})]}),(0,a.jsx)(h.Z,{className:"h-8 w-8 text-blue-500"})]})})}),(0,a.jsx)(D.Zb,{children:(0,a.jsx)(D.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Completed"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:et.completedTasks})]}),(0,a.jsx)(c.Z,{className:"h-8 w-8 text-green-500"})]})})}),(0,a.jsx)(D.Zb,{children:(0,a.jsx)(D.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Overdue"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-600",children:et.overdueTasks})]}),(0,a.jsx)(x.Z,{className:"h-8 w-8 text-red-500"})]})})}),(0,a.jsx)(D.Zb,{children:(0,a.jsx)(D.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Progress"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:[et.totalTasks>0?Math.round(et.completedTasks/et.totalTasks*100):0,"%"]})]}),(0,a.jsx)(p.Z,{className:"h-8 w-8 text-purple-500"})]})})})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(g.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(A.I,{placeholder:"Search tasks...",value:O,onChange:e=>Q(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(_.Ph,{value:L,onValueChange:$,children:[(0,a.jsx)(_.i4,{className:"w-[180px]",children:(0,a.jsx)(_.ki,{placeholder:"Priority"})}),(0,a.jsxs)(_.Bw,{children:[(0,a.jsx)(_.Ql,{value:"all",children:"All Priorities"}),(0,a.jsx)(_.Ql,{value:"urgent",children:"Urgent"}),(0,a.jsx)(_.Ql,{value:"high",children:"High"}),(0,a.jsx)(_.Ql,{value:"medium",children:"Medium"}),(0,a.jsx)(_.Ql,{value:"low",children:"Low"})]})]}),(0,a.jsxs)(_.Ph,{value:q,onValueChange:K,children:[(0,a.jsx)(_.i4,{className:"w-[180px]",children:(0,a.jsx)(_.ki,{placeholder:"Type"})}),(0,a.jsxs)(_.Bw,{children:[(0,a.jsx)(_.Ql,{value:"all",children:"All Types"}),I.getAvailableTypes().map(e=>(0,a.jsx)(_.Ql,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]})]}),(0,a.jsxs)(_.Ph,{value:R,onValueChange:Y,children:[(0,a.jsx)(_.i4,{className:"w-[180px]",children:(0,a.jsx)(_.ki,{placeholder:"Project"})}),(0,a.jsxs)(_.Bw,{children:[(0,a.jsx)(_.Ql,{value:"all",children:"All Projects"}),ee.map(e=>(0,a.jsx)(_.Ql,{value:e._id,children:e.name},e._id))]})]}),(0,a.jsxs)(_.Ph,{value:W,onValueChange:G,children:[(0,a.jsx)(_.i4,{className:"w-[180px]",children:(0,a.jsx)(_.ki,{placeholder:"Assigned To"})}),(0,a.jsxs)(_.Bw,{children:[(0,a.jsx)(_.Ql,{value:"all",children:"All Users"}),J.map(e=>(0,a.jsxs)(_.Ql,{value:e._id,children:[e.firstName," ",e.lastName]},e._id))]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:eq.map(e=>{var s,t;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(e.icon,{className:"h-5 w-5"}),(0,a.jsx)("h3",{className:"font-semibold text-lg",children:e.title})]}),(0,a.jsx)(Z.C,{variant:"secondary",children:(null===(s=eR[e.id])||void 0===s?void 0:s.length)||0})]}),(0,a.jsx)("div",{className:"p-4 rounded-lg ".concat(e.color," min-h-[500px] transition-all duration-200 ").concat(eM===e.id?"ring-2 ring-blue-500 bg-blue-50":""),onDragOver:s=>handleDragOver(s,e.id),onDragLeave:handleDragLeave,onDrop:s=>handleDrop(s,e.id),children:(0,a.jsxs)("div",{className:"space-y-3",children:[null===(t=eR[e.id])||void 0===t?void 0:t.map(s=>{var t;return(0,a.jsx)(D.Zb,{className:"cursor-pointer hover:shadow-md transition-all duration-200 ".concat(eO&&(null==eF?void 0:eF.id)===s._id?"opacity-50 scale-95":""," ").concat(eL.has(s._id)?"animate-pulse":""),draggable:!0,onDragStart:t=>handleDragStart(t,s._id,e.id),children:(0,a.jsx)(D.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-lg",children:getTypeIcon(s.type)}),(0,a.jsx)("h4",{className:"font-medium text-sm",children:s.title})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(Z.C,{className:getPriorityColor(s.priority),children:s.priority}),(0,a.jsx)(S.z,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),ei(s)},children:(0,a.jsx)(v,{className:"h-4 w-4"})})]})]}),s.description&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:s.description}),s.subtasks&&s.subtasks.length>0&&(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{children:"Progress"}),(0,a.jsxs)("span",{children:[Math.round(getProgressPercentage(s)),"%"]})]}),(0,a.jsx)(V.E,{value:getProgressPercentage(s),className:"h-2"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(j.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:(null===(t=J.find(e=>e._id===s.assignedTo))||void 0===t?void 0:t.firstName)||"Unassigned"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(y.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:isOverdue(s.dueDate)?"text-red-600 font-medium":"",children:new Date(s.dueDate).toLocaleDateString()})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(f.Z,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[s.actualHours||0,"h / ",s.estimatedHours||0,"h"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(k,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[s.progress||0,"%"]})]})]}),s.comments&&s.comments.length>0&&(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-muted-foreground",children:[(0,a.jsx)(w,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[s.comments.length," comments"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 pt-2",children:[(0,a.jsxs)(S.z,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),handleEditTask(s)},className:"flex-1",children:[(0,a.jsx)(N.Z,{className:"h-3 w-3 mr-1"}),"Edit"]}),(0,a.jsx)(S.z,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),handleDeleteTask(s)},children:(0,a.jsx)(b.Z,{className:"h-3 w-3"})})]})]})})},s._id)}),(0,a.jsxs)(S.z,{variant:"outline",className:"w-full",onClick:()=>handleAddTask(e.id),children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Add Task"]})]})})]},e.id)})}),(0,a.jsx)(E.Vq,{open:en,onOpenChange:el,children:(0,a.jsxs)(E.cZ,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(E.fK,{children:[(0,a.jsx)(E.$N,{children:er?"Edit Task":"Create New Task"}),(0,a.jsx)(E.Be,{children:er?"Update task details below.":"Fill in the task details below."})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(B._,{htmlFor:"title",children:"Title"}),(0,a.jsx)(A.I,{id:"title",value:eb.title,onChange:e=>eT(s=>({...s,title:e.target.value})),placeholder:"Enter task title"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(B._,{htmlFor:"type",children:"Type"}),(0,a.jsxs)(_.Ph,{value:eb.type,onValueChange:e=>eT(s=>({...s,type:e})),children:[(0,a.jsx)(_.i4,{children:(0,a.jsx)(_.ki,{})}),(0,a.jsx)(_.Bw,{children:I.getAvailableTypes().map(e=>(0,a.jsx)(_.Ql,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(B._,{htmlFor:"description",children:"Description"}),(0,a.jsx)(P.g,{id:"description",value:eb.description,onChange:e=>eT(s=>({...s,description:e.target.value})),placeholder:"Enter task description",rows:3})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(B._,{htmlFor:"project",children:"Project"}),(0,a.jsxs)(_.Ph,{value:eb.project,onValueChange:e=>eT(s=>({...s,project:e})),children:[(0,a.jsx)(_.i4,{children:(0,a.jsx)(_.ki,{placeholder:"Select project"})}),(0,a.jsx)(_.Bw,{children:ee.map(e=>(0,a.jsx)(_.Ql,{value:e._id,children:e.name},e._id))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(B._,{htmlFor:"assignedTo",children:"Assigned To"}),(0,a.jsxs)(_.Ph,{value:eb.assignedTo,onValueChange:e=>eT(s=>({...s,assignedTo:e})),children:[(0,a.jsx)(_.i4,{children:(0,a.jsx)(_.ki,{placeholder:"Select user"})}),(0,a.jsx)(_.Bw,{children:J.map(e=>(0,a.jsxs)(_.Ql,{value:e._id,children:[e.firstName," ",e.lastName]},e._id))})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(B._,{htmlFor:"priority",children:"Priority"}),(0,a.jsxs)(_.Ph,{value:eb.priority,onValueChange:e=>eT(s=>({...s,priority:e})),children:[(0,a.jsx)(_.i4,{children:(0,a.jsx)(_.ki,{})}),(0,a.jsx)(_.Bw,{children:I.getAvailablePriorities().map(e=>(0,a.jsx)(_.Ql,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(B._,{htmlFor:"dueDate",children:"Due Date"}),(0,a.jsx)(A.I,{id:"dueDate",type:"date",value:eb.dueDate,onChange:e=>eT(s=>({...s,dueDate:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(B._,{htmlFor:"estimatedHours",children:"Estimated Hours"}),(0,a.jsx)(A.I,{id:"estimatedHours",type:"number",value:eb.estimatedHours,onChange:e=>eT(s=>({...s,estimatedHours:parseFloat(e.target.value)||0})),min:"0",step:"0.5"})]})]})]}),(0,a.jsxs)(E.cN,{children:[(0,a.jsx)(S.z,{variant:"outline",onClick:()=>el(!1),children:"Cancel"}),(0,a.jsxs)(S.z,{onClick:handleSaveTask,children:[(0,a.jsx)(T.Z,{className:"h-4 w-4 mr-2"}),er?"Update Task":"Create Task"]})]})]})}),(0,a.jsx)(E.Vq,{open:ed,onOpenChange:ec,children:(0,a.jsxs)(E.cZ,{children:[(0,a.jsxs)(E.fK,{children:[(0,a.jsx)(E.$N,{children:"Delete Task"}),(0,a.jsxs)(E.Be,{children:['Are you sure you want to delete "',null==er?void 0:er.title,'"? This action cannot be undone.']})]}),(0,a.jsxs)(E.cN,{children:[(0,a.jsx)(S.z,{variant:"outline",onClick:()=>ec(!1),children:"Cancel"}),(0,a.jsxs)(S.z,{variant:"destructive",onClick:handleConfirmDelete,children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Delete Task"]})]})]})}),(0,a.jsx)(E.Vq,{open:eo,onOpenChange:eu,children:(0,a.jsxs)(E.cZ,{children:[(0,a.jsxs)(E.fK,{children:[(0,a.jsx)(E.$N,{children:"Add Comment"}),(0,a.jsxs)(E.Be,{children:['Add a comment to "',null==er?void 0:er.title,'"']})]}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsx)(P.g,{value:eC,onChange:e=>eD(e.target.value),placeholder:"Enter your comment...",rows:3})}),(0,a.jsxs)(E.cN,{children:[(0,a.jsx)(S.z,{variant:"outline",onClick:()=>eu(!1),children:"Cancel"}),(0,a.jsxs)(S.z,{onClick:handleAddComment,children:[(0,a.jsx)(w,{className:"h-4 w-4 mr-2"}),"Add Comment"]})]})]})}),(0,a.jsx)(E.Vq,{open:em,onOpenChange:eh,children:(0,a.jsxs)(E.cZ,{children:[(0,a.jsxs)(E.fK,{children:[(0,a.jsx)(E.$N,{children:"Time Tracking"}),(0,a.jsxs)(E.Be,{children:['Track time spent on "',null==er?void 0:er.title,'"']})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(B._,{htmlFor:"hours",children:"Hours"}),(0,a.jsx)(A.I,{id:"hours",type:"number",value:eP.hours,onChange:e=>eE(s=>({...s,hours:parseInt(e.target.value)||0})),min:"0"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(B._,{htmlFor:"minutes",children:"Minutes"}),(0,a.jsx)(A.I,{id:"minutes",type:"number",value:eP.minutes,onChange:e=>eE(s=>({...s,minutes:parseInt(e.target.value)||0})),min:"0",max:"59"})]})]}),eB&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Time tracking active"}),(0,a.jsxs)("p",{className:"text-lg font-mono",children:[eH?Math.floor((Date.now()-eH.getTime())/1e3/60):0," minutes"]})]})]}),(0,a.jsxs)(E.cN,{children:[(0,a.jsx)(S.z,{variant:"outline",onClick:()=>eh(!1),children:"Cancel"}),eB?(0,a.jsxs)(S.z,{onClick:()=>{eV(!1),ez(null)},children:[(0,a.jsx)(C.Z,{className:"h-4 w-4 mr-2"}),"Stop Tracking"]}):(0,a.jsxs)(S.z,{onClick:()=>{eV(!0),ez(new Date)},children:[(0,a.jsx)(l.Z,{className:"h-4 w-4 mr-2"}),"Start Tracking"]}),(0,a.jsxs)(S.z,{onClick:handleSaveTimeTracking,children:[(0,a.jsx)(T.Z,{className:"h-4 w-4 mr-2"}),"Save Time"]})]})]})})]})}},20985:function(e,s,t){"use strict";t.d(s,{E:function(){return l}});var a=t(57437),r=t(2265),i=t(23177),n=t(60345);let l=r.forwardRef((e,s)=>{let{className:t,value:r,...l}=e;return(0,a.jsx)(i.fC,{ref:s,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...l,children:(0,a.jsx)(i.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});l.displayName=i.fC.displayName},84606:function(e,s,t){"use strict";t.d(s,{g:function(){return n}});var a=t(57437),r=t(2265),i=t(60345);let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...r})});n.displayName="Textarea"},23177:function(e,s,t){"use strict";t.d(s,{fC:function(){return p},z$:function(){return g}});var a=t(2265),r=t(56989),i=t(9381),n=t(57437),l="Progress",[d,c]=(0,r.b)(l),[o,u]=d(l),m=a.forwardRef((e,s)=>{let{__scopeProgress:t,value:a=null,max:r,getValueLabel:l=defaultGetValueLabel,...d}=e;(r||0===r)&&!isValidMaxNumber(r)&&console.error(getInvalidMaxError(`${r}`,"Progress"));let c=isValidMaxNumber(r)?r:100;null===a||isValidValueNumber(a,c)||console.error(getInvalidValueError(`${a}`,"Progress"));let u=isValidValueNumber(a,c)?a:null,m=isNumber(u)?l(u,c):void 0;return(0,n.jsx)(o,{scope:t,value:u,max:c,children:(0,n.jsx)(i.WV.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":isNumber(u)?u:void 0,"aria-valuetext":m,role:"progressbar","data-state":getProgressState(u,c),"data-value":u??void 0,"data-max":c,...d,ref:s})})});m.displayName=l;var h="ProgressIndicator",x=a.forwardRef((e,s)=>{let{__scopeProgress:t,...a}=e,r=u(h,t);return(0,n.jsx)(i.WV.div,{"data-state":getProgressState(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...a,ref:s})});function defaultGetValueLabel(e,s){return`${Math.round(e/s*100)}%`}function getProgressState(e,s){return null==e?"indeterminate":e===s?"complete":"loading"}function isNumber(e){return"number"==typeof e}function isValidMaxNumber(e){return isNumber(e)&&!isNaN(e)&&e>0}function isValidValueNumber(e,s){return isNumber(e)&&!isNaN(e)&&e<=s&&e>=0}function getInvalidMaxError(e,s){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`}function getInvalidValueError(e,s){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}x.displayName=h;var p=m,g=x},94115:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});var a=t(17865);let r=(0,a.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},56788:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});var a=t(17865);let r=(0,a.Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},11666:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});var a=t(17865);let r=(0,a.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]])},38523:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});var a=t(17865);let r=(0,a.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},68492:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});var a=t(17865);let r=(0,a.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},74323:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});var a=t(17865);let r=(0,a.Z)("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]])},97022:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});var a=t(17865);let r=(0,a.Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]])},59809:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});var a=t(17865);let r=(0,a.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},95779:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});var a=t(17865);let r=(0,a.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},99839:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});var a=t(17865);let r=(0,a.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}},function(e){e.O(0,[5881,4829,7588,1515,4061,6314,1397,9448,2971,2472,1744],function(){return e(e.s=25547)}),_N_E=e.O()}]);